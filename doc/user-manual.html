<html>
<head>

<title>FRAME3DD User Manual</title>

<META NAME="Description" CONTENT=" Free software for static and dynamic structural analysis of 3D moment-resisting frames with elastic and geometric stiffness. Written in ANSI C.  
Source code includes:  frame analysis, LDL' decomposition, LU decomposition, sub-space iteration, Stodola iteration, Sturm eigenvalue checking,
Static Condensation, Guyan Reduction and Dynamic Condensation.
Matlab interface.
Graphical output and mode shape animation via Gnuplot.">

<META NAME="Keywords" CONTENT="Frame3DD, Structural Dynamics, Structural Analysis, Frame Analysis, 3D Frames, 3D Trusses, Structural Analysis Software, Geometric Stiffness, Geometric Stiffness Matrix, Modal Analysis, Modal Analysis Software, Structural Dynamics, Structural Dynamics Software, LDL Decomposition, LDL Decomposition, LU Decomposition, Subspace Iteration, Gnuplot, Matlab, Octave, Henri Gavin, Duke">

<style>
h1 {font: bold xx-large sans-serif}
h2 {font: bold x-large sans-serif}
h3 {font: bold large sans-serif}
h4 {font: bold small sans-serif}
li, td, p {font: normal small sans-serif}
div.eq {font-style:italic; width:100%; text-align:center; margin-top: 6pt; margin-bottom: 6pt}
div.note {width: 60em; border: solid 2pt gray; background-color: #FFFFEE; padding:10px; margin-top: 6pt; margin-bottom: 6pt; font: normal small sans-serif }
pre {background-color: #FFF4C4}
iframe {background-color: #000000; margin-top: 5px; margin-bottom: 5px, border:0}
</style>

<body>

<img src="img/psoe.jpg" height="100" align="left" border="0">
<font face="Arial, Helvetica, sans-serif" size="3">
<nobr><b>User manual and reference for <a href="http://frame3dd.sourceforge.net/">Frame3DD: A Structural Frame Analysis Program</a></b>
</nobr><br>
<a href="http://cee.duke.edu/">
Department of Civil and Environmental Engineering</a><br>
<a href="http://pratt.duke.edu/">
Edmund T. Pratt School of Engineering</a><br>
<a href="http://www.duke.edu/">
Duke University</a> - Box 90287,
<a href="http://www.durham-nc.com/"> Durham</a>,
<a href="http://www.visitnc.com/"> NC</a> 27708-0287
</font>

<p><i>
<font face="Verdana, Arial, Helvetica, sans-serif" size="2">
<a href="http://cee.duke.edu/ARCHIVES/people/faculty/gavin.shtml">Henri P. Gavin</a>, P.E., Ph.D.,
- Associate Professor -
<a href="&#109;&#097;&#105;&#108;&#116;&#111;&#058;&#072;&#101;&#110;&#114;&#105;&#046;&#071;&#097;&#118;&#105;&#110;&#064;&#068;&#117;&#107;&#101;&#046;&#101;&#100;&#117;">
&#072;&#101;&#110;&#114;&#105;&#046;&#071;&#097;&#118;&#105;&#110;&#064;&#068;&#117;&#107;&#101;&#046;&#101;&#100;&#117;
</a>
- tel: 919-660-5201 - fax: 919-660-5219</font></i></p>

<hr>
<h1>FRAME3DD</h1>

<iframe src="version.html" width="250" height="30" style="border:solid 1pt grey"></iframe>

<!-- <h4>DESCRIPTION </h4> -->
<p><b>Frame3DD</b> is a program for the static and dynamic structural analysis of two- and three-dimensional frames and trusses with elastic and geometric stiffness.
</p>

<!-- 3D frames , 3D frames , 3D frames , 3D frames , 3D frames , 3D frames  -->

<p><b>Frame3DD</b> is executed from the
<a href="http://en.wikipedia.org/wiki/Windows_command_line">command prompt</a> (Windows)
or <a href="http://en.wikipedia.org/wiki/Unix_shell">shell</a> (Linux) or <a href="http://www.macdevcenter.com/pub/a/mac/2001/12/14/terminal_one.html">terminal</a> (OS X), as follows, with filenames changed as required:
<pre>
frame3dd inputfile.3dd outputfile.txt
</pre>
</p>

<!-- 3D frames , 3D frames , 3D frames , 3D frames , 3D frames , 3D frames  -->

<p><b>Frame3DD</b> reads a plain-text <b>Input Data file</b>, containing joint coordinates, frame element geometry, material moduli, fixed joints, prescribed displacements, load information, and optionally, mass information if a modal analysis is to be carried out.
<!-- (The Input Data file is not a Matlab file.   Values are not input using Matlab matrix notation with square brackets.)-->
</p>

<!-- 3D frames , 3D frames , 3D frames , 3D frames , 3D frames , 3D frames  -->

<p><b>Frame3DD</b> appends results to a plain-text <b>Output Data file</b>.
Results from the most recent analysis
are appended to the <b>end</b> of the Output Data file.
Each section of the Output Data gives the date and time of the analysis,
recapitulates the input information, gives joint displacements in global coordinates, frame element end-forces in local coordinates, reactions in global coordinates, and natural frequencies and mode shapes in global coordinates.
</p>

<p><b>Frame3DD</b> writes a
<a href="http://www.duke.edu/~hpgavin/gnuplot.html">Gnuplot</a>
script file used for viewing deformed frames and dynamic mode shapes.
If the Output Data is written to a file called <tt>MyResultsA.out</tt>,
the Gnuplot script is written to a file called <tt>MyResultsA.plt</tt>.
Graphical output may be viewed by starting Gnuplot and typing:
<tt> load 'MyResultsA.plt'</tt>.

<p><b>Frame3DD</b> can consider multiple static load cases in a single analysis.</p>

<p><b>Frame3DD</b> may optionally interface with Matlab and with spreadsheet programs.</p>

<p><b>Frame3DD</b> is <b>free open-source software</b>; you may redistribute it and/or modify it under
the terms of the GNU General Public License (GPL) as published by the
<a href="http://www.fsf.org/">Free Software Foundation</a>.
The software is distributed in the hope that it will be useful, but without any warranty; without even the implied warranty of merchantability or fitness for a particular purpose.  See <a href="../LICENSE.txt">LICENSE.txt</a> for details.
</p>

<!--
Free software for static and dynamic structural analysis of 2D
and 3D frames and trusses with elastic and geometric stiffness.
Computes the static deflections, reactions, internal element
forces, natural frequencies, mode shapes and modal participation
factors of two- and three- dimensional elastic structures using
direct stiffness and mass assembly.  Written in  C.  Source code
includes: frame analysis, LDL' decomposition, LU decomposition,
Newton-Raphson iteration, sub-space iteration, Stodola iteration,
Sturm eigenvalue check, and Static Condensation, Guyan Reduction,
Dynamic Condensation.  Graphical output and mode shape animation
via <a href="http://www.gnuplot.info/">Gnuplot</a> version 4.2.
<hr>
<h4>SYNOPSIS </h4>
       frame3dd  <Input Data file>  <Output Data file>
<hr>
-->

<h2>Contents</h2>

<ol>
<li><a href="#starting">Getting started</a>
<li><a href="#iodata"/>Input Data and Output Data</a>
<li><a href="#installrun"/>How to install and run Frame3DD</a>
<ol>
  <li><a href="#runlinux"/>Linux/Unix</a>
  <li><a href="#runwindows"/>Windows</a>
  <li><a href="#runosx"/>Mac OS X</a>
</ol>
<li><a href="#Matlab">Matlab Interface</a>
<li><a href="#CSV">Spreadsheet Interface</a>
<li><a href="#FrameEd">FrameEd</a>
<li><a href="#structuralmodeling">Structural Modeling</a>
<li><a href="#numerical">Numerical Details</a>
<li><a href="#InputData">Input Data Format</a>
<li><a href="#Variables">Variable Definitions</a>
<li><a href="#commandline">Command-line options</a>
<li><a href="#sourcecode">Source code</a>
<li><a href="#enhancements">Enhancements projected for future versions</a>
<li><a href="#references">References</a>
</ol>

<a name="starting"><h2>1. Getting started</h2>
<ol>
<li>Read the User Manual and Reference (this file).
<li>Download or build the Frame3DD executable for your operating system (see below).
<li>Optionally, obtain a copy of Gnuplot for your operating system.
<li>  Open a terminal window, go to the Frame3DD/examples directory, and run the program on one of the examples using a command like ...
	  <tt>frame3dd  exA.3dd  exA.out</tt> 
<li>Open the Output Data file using your text editor and view the Output Data.
<!--     Running this program will create many files.  Most of them are used
         for graphics and should be written to the  /tmp  directory.
<li>      One of the files will be written to the current working directory and will be called
         something like frA.plt   This file is used for plotting.   -->
<li>      Plot the structural configuration, the deformed structural shape, and mode-shapes, by starting <a href="http://www.duke.edu/~hpgavin/gnuplot.html">Gnuplot</a>, and typing
           <tt>load 'exA.plt'</tt> at the <tt>gnuplot></tt> prompt.
<br>
Observe a series of plots by hitting the Return (or Enter) key between plots.
<br>
If a dynamic analysis was performed, you will enjoy an animation of selected mode shapes.<br>
Continue to hit the Return (or Enter) key until the last plot is displayed.
</ol>

<a name="iodata"/><h2>2. Input Data and Output Data</h2>

<p>
The <b>Input Data file</b> is a plain text file and must adhere to the format
<a href="#InputData">described below</a>.
Several examples are given at <a href="http://frame3dd.sourceforge.net/">http://frame3dd.sourceforge.net/</a>. When writing your own input files, note the following points:</p>

<ul>
<li>Comments may be placed anywhere in the file and are helpful in organizing the Input Data.
<br>
A comment begins with one of the following four characters <tt># % ? ; </tt> and continues to the end of the line.
<li>All commas in the Input Data are ignored.
<li>Floating point numbers must be entered as 1.234 1234 or 1.234e3.
<li>Arithmetic expressions such as 1.234*10^3 or 6*sin(pi/2) are <b>not</b> allowed
in the Input Data (unless the <a href="#Matlab">Matlab interface</a> is used).
</ul>


<p>
To write your own Input Data file, it may be helpful to start with an example that resembles the system you would like to analyze.  Carefully compare the graphical output of the example, the Input Data file, the Output Data file,
and the <a href="#InputData"><b>Input Data format</b></a>, with the <a href="#Variables"><b>variable definitions</b></a> at the end of this page.
</p>
<p>
You may edit Input Data files using a good plain text editor
(<a href="http://thomer.com/vi/vi.html">vim</a>,
 <a href="http://www.jedit.org/index.php">jEdit</a>,
 <a href="http://www.nano-editor.org/">nano</a>,
 <a href="http://www.gnome.org/projects/gedit/">gedit (Linux)</a>,
 <a href="http://www.barebones.com/products/textwrangler/">TextWrangler (OS X)</a>,
<!-- 
 <a href="http://emacsformacosx.com/">Emacs for OS X</a>, 
 <a href="http://macvim.org/OSX/index.php">Vim for OS X</a>. 
 <a href="http://www.apple.com/support/mac101/work/23/">TextEdit (OS X)</a>,
-->
 <a href="http://notepad-plus.sourceforge.net/uk/site.htm">NotePad++ (Windows)</a>,
<!--
 <a href="ftp://ftp.vim.org/pub/vim/pc/gvim72.exe">gvim (Windows)</a>, 
 <a href="http://www.pcshareware.com/anotepad.htm">Notepad (Windows)</a>
-->
etc.),
using the Matlab interface, or using spreadsheet programs
(<a href="http://docs.google.com/">GoogleDocs</a>,
 <a href="http://www.openoffice.org/">OpenOffice</a>, 
 <a href="http://projects.gnome.org/gnumeric/">Gnumeric</a>, or Excel).
</p>
<p>
Details regarding the Matlab interface to Frame3DD are <a href="#Matlab">here</a>.<br>
Details regarding the spreadsheet interface to Frame3DD are <a href="#CSV">here</a>.<br>
</p>
<p>
It might take a few tries to get your Input Data just right.
Frame3DD checks the Input Data for errors prior to analyzing the system
and, where possible, displays descriptive diagnostic messages when errors are
found with the Input Data.
</p>

<div class=note>
<b>Note:</b> Frame3DD generates several <b>additional output files</b> used in plotting deformed frames.  
By default, these output files are sent to your temporary file folder. 
On Windows, the location of this folder is the contents of the TEMP environment variable, which you can examine by typing 
<pre>
echo %TEMP%
</pre>
On other platforms, this is the <tt>/tmp</tt> directory.
<br><br>
If you would like your output files to be sent to another location, you can set the <a href="http://en.wikipedia.org/wiki/Environment_variable">environment variable</a> <tt>FRAME3DD_OUTDIR</tt> with the path to your output directory. All new output files will then appear in the folder you have specified.
</div>

<a name="installrun"/><h2>3. How to install and run Frame3DD</h2>

<p>
Compiled executable programs are updated with some regularity.  
Frame3DD installation packages are available for download for Linux,
for OS X, and for Windows operating systems as .ZIP archives.
These installation .ZIP archives include:
<ul>
<li> A copy of the GPL the license (LICENSE.txt)
<li> The executable program (frame3dd) for the selected operating system (Linux, OS X, or Windows)
<li> This manual, (doc/user-manual.html) 
<li> Some general information (README.txt)
<li> Some Windows-specific information (README-win32.txt)
<li> The Matlab interface code (matlab/)
<li> A summary of recent updates to the program (ChangeLog.txt)
<li> A set of example Input Data files (examples/)
</ul>
</p>

<p>
A separate Windows installer includes a Microstran viewer module for Frame3DD.
</p>
   
<p>
The date stamp at the beginning of the manual corresponds to the release date of the code.
</p>

<a name="runlinux"/><h3>3.1 Linux/Unix</h3>

<p>
For Linux/Unix
you may install Frame3DD from a .ZIP archive 
or you may compile from the source code.
The following instructions install Frame3DD to the <b>Desktop</b> but other directories may be substituted, if desired.  
</p>

<h4>3.1.1 Installing from the .ZIP archive for Linux</h4>

<ol>
<li> Linux and Unix systems have good plain text editors pre-installed 
(<a href="http://www.jerrywang.net/vi/">vim</a>,
 <a href="http://www.gnome.org/projects/gedit/">gedit</a>,
 <a href="http://www.nano-editor.org/">nano</a>).
There should be no need to install another editor.
A tutorial for vim is <a href="http://www.jerrywang.net/vi/">here</a>.
<!-- http://sourceforge.net/project/platformdownload.php?group_id=221386" -->
<li><a href="https://sourceforge.net/projects/frame3dd/files/">
Download</a> the Frame3DD .ZIP archive (Frame3DD_VERSION_linux.zip) and save it in your <b>Desktop</b>.
<li> If the .ZIP archive was not automatically unzipped, 
double-click the icon to extract it. 
<li>
<b>(<i>Recommended</i>)</b>
Put the <b>Frame3DD</b> directory in your path and set the <tt>FRAME3DD_OUTDIR</tt> location.<br>
To do this, double-click the <b>Home</b> icon on the Desktop, and select <b>View > Show Hidden Files</b><br><br>

If you have a file called <b>.bashrc</b> in your home directory,
open it with a double-click,
and cut-and paste the following six lines into the beginning of <b>.bashrc</b> 
<pre>
# for Frame3DD ... http://frame3dd.sourceforge.net/
export PATH=$PATH:$HOME/Desktop/Frame3DD/         # add to the path
if [ ! -d /tmp/frame3dd_temp_$USER ]; then
    mkdir /tmp/frame3dd_temp_$USER                # create a Frame3DD output directory
    echo "creating /tmp/frame3dd_temp_$USER for Frame3DD"
fi
export FRAME3DD_OUTDIR=/tmp/frame3dd_temp_$USER   # specify the Frame3DD output directory
</pre>
... save, and exit the editor.   

<br><br>

If you have a file named <b>.cshrc</b> in your home directory,
open it with a double-click, 
and cut-and paste the following six lines into the beginning of <b>.cshrc</b> 
<pre>
# for Frame3DD ... http://frame3dd.sourceforge.net/
set path = ( $path $home/Desktop/Frame3DD )      # add to path
if ( ! -d /tmp/frame3dd_temp_$user ) then
    mkdir /tmp/frame3dd_temp_$user               # create a Frame3DD output directory
    echo "creating /tmp/frame3dd_temp_$user for Frame3DD"
endif
setenv FRAME3DD_OUTDIR /tmp/frame3dd_temp_$user  # specify the Frame3DD output directory
</pre>
... save, and exit the editor.   <br>.

<li> Open a Terminal window. (Right-click on an open part of the Desktop and select <b>Open Terminal</b>). 
Change to the directory containing the Frame3DD example files and run an example, as follows. 
<pre>
cd  ~/Desktop/Frame3DD/examples/                 # change to the examples directory
frame3dd  exA.3dd  exA.out                       # run the program
</pre>
Some run-time information will be displayed on the Terminal and
the results of your Frame3DD analysis will have been appended to the end of the <tt>exA.out</tt> Output Data file.
Data files used primarily for plotting are stored in the <b>/tmp/frame3dd_temp_$USER</b> directory.
<li>       You may view Output Data files and edit Input Data files using a good plain text editor
<!-- (<a href="http://thomer.com/vi/vi.html">vim</a>, -->
(<a href="http://www.jerrywang.net/vi/">vim</a>,
 <a href="http://www.gnome.org/projects/gedit/">gedit</a>,
 <a href="http://www.nano-editor.org/">nano</a>),
or a spreadsheet program
(<a href="http://docs.google.com/">GoogleDocs</a>,
 <a href="http://www.openoffice.org/">OpenOffice</a>,
 <a href="http://projects.gnome.org/gnumeric/">Gnumeric</a>).  For example, 
to read or edit the Input Data file.   Double-click the <b>Home</b> icon on the Desktop, navigate to the directory of your data files, right click
on the Data File and select the editor of your choice.
<li>Run your own Frame3DD analyses within the Terminal window using a command like ...
<pre>
frame3dd  MyFrame.3dd  MyResultsA.out
</pre>
<!-- <li> You may wish to delete all the files in the temporary file directory (c:\temp) after you have finished your analyses.  -->
</ol>

<p>
Graphical output may be viewed with <a href="http://www.duke.edu/~hpgavin/gnuplot.html">Gnuplot</a>, 

<ol>
<li> Gnuplot is commonly pre-installed on Linux systems.
If it is not, you may install it only if you have root privileges using a command like ... <tt> sudo apt-get install gnuplot </tt> ... or by using the package manager GUI installed on your system.

<li>Start Gnuplot in the Terminal with the command:
<pre>
gnuplot
</pre>
<li>Display the plots of your structure using Gnuplot with a command like ...
<pre>
      gnuplot>  load 'MyResultsA.plt'
</pre>
where <tt>MyResultsA.out</tt> is the name of of the Output Data file 
specified when running Frame3DD. 
<li>Hit the 'Return' key in the Terminal window to see the sequence of plots
and animations until the <tt>gnuplot></tt> prompt returns.
Or hit <b>CTRL-C</b> to stop the plots at the current plot.  
<li> To save the current plot as a PostScript file in the Frame3DD/examples directory, use the <tt>saveplot</tt> script included in the Frame3DD/examples directory.
<pre>
     gnuplot>  load 'saveplot'
     gnuplot>  !cp my-plot.ps PlotFileA.ps
</pre>
<li>After finishing with your plots, you can exit Gnuplot by typing 
<pre>
     gnuplot>  quit
</pre>
</ol>

<h4>3.1.2 Installing from source for Linux/Unix</h4>

<p>
<!--
For Linux and Unix we currently only provide source-code tarball; you must
build the software yourself.
-->
The following instructions work on Ubuntu 8.10 - 9.10
and should work with minor changes on any other recent Linux or Unix system.
</p>

<ol>
<li>Ensure you have Python, SCons and GCC installed on your system. It should suffice to 
<pre>
sudo apt-get install build-essential scons
</pre>
<li>If you would like to build the Microstran viewer, ensure that the package <tt>libsoqt-dev4</tt> is installed on your system.
<pre>
sudo apt-get install libsoqt-dev4
</pre>
<!-- http://sourceforge.net/project/platformdownload.php?group_id=221386" -->
<li><a href="https://sourceforge.net/projects/frame3dd/files/">
Download</a> the Frame3DD source-code tarball (frame3dd-VERSION.tar.bz2)
and save it in your home directory.

<li>Open a Terminal, unpack the source code, enter the source directory,
and build the code, as follows:
<pre>
tar jxvf frame3dd-VERSION.tar.bz2
cd frame3dd-VERSION
scons
</pre>
<li>
If you have root privileges, install <b>build/frame3dd</b> to <b>/usr/local/bin/</b> ...
<pre>
sudo scons install
</pre>
or you may install frame3dd in another system directory if your choosing, 
such as, ...
<pre>
sudo scons install INSTALL_PREFIX=/usr/bin/
</pre>
<li>If you do not have root privileges, you can run Frame3dd directly from the build tree:
<pre>
export LD_LIBRARY_PATH=~/frame3dd-VERSION/build</tt>
export PATH=$PATH:~/frame3dd-VERSION/build
</pre>

<li>Copy one of the frame3dd-VERSION/examples/*.3dd files (e.g., <tt>exA.3dd</tt>) into your home directory, make sure you have write-privileges for the file, and run one of the examples
<pre>
frame3dd  exA.3dd  exA.out
</pre>
</ol>


<a name="runwindows"/><h3>3.2 Windows</h3>

<p>
For Microsoft Windows, 
you may install Frame3DD from a .ZIP archive, you may use a binary installer
(which may sometimes be out of date), or you may compile from the source code.
The following instructions install Frame3DD to the <b>Desktop</b> but other directories may be substituted, if desired.  
</p>

<h4> 3.2.1 Installing from the .ZIP archive for Windows</h4>

<ol>
<!-- http://sourceforge.net/project/platformdownload.php?group_id=221386" -->
<li>Install a good plain text editor for Windows:
 <a href="http://notepad-plus.sourceforge.net/uk/site.htm">NotePad++</a>, or
 <a href="http://www.jedit.org/index.php">jEdit</a>, or
<!-- <a href="http://www.pcshareware.com/anotepad.htm">Notepad</a>, or -->
 <a href="ftp://ftp.vim.org/pub/vim/pc/gvim72.exe">gvim</a>.
A tutorial for gvim is <a href="http://www.jerrywang.net/vi/">here</a>. 
<li><a href="https://sourceforge.net/projects/frame3dd/files/">
Download</a> the Frame3DD .ZIP archive (Frame3DD_VERSION_win32.zip) and save it to your <b>Desktop</b>.<br>
<!-- <li> Read <b>README-win32.txt</b> -->
<li> If the .ZIP archive was not automatically unzipped, 
double-click the icon to extract it. 
<li> <b>(<i>Recommended</i>)</b>
Put the <b>Frame3DD</b> directory in your path and set the <tt>FRAME3DD_OUTDIR</tt> location.<br>
To do this, create the folder <b>%TEMP%\frame3dd_temp</b>, open <b>C:\autoexec.bat</b>
and cut-and-paste the following lines into <b>C:\autoexec.bat</b>
<pre>
set PATH=%PATH%;%HOMEPATH%\Desktop\Frame3DD
set FRAME3DD_OUTDIR=%TEMP%\frame3dd_temp
</pre>
Preferably, you may set the <tt>PATH</tt> and <tt>FRAME3DD_OUTDIR</tt> using: 
<b> right-click My Computer > Properties > Advanced > Environment Variables</b>.
Further instructions are <a href="http://vlaurie.com/computers2/Articles/environment.htm">here</a>.  

<li>Open a 
<a href="http://en.wikipedia.org/wiki/Windows_command_line">Command Prompt</a> window
(<b>Start > All Programs > Accessories > Command Prompt</b>),
change to the directory of example files, and run an example, as follows:
<pre>
chdir %HOMEPATH%\Desktop\Frame3DD\examples
frame3dd  exA.3dd  exA.out
</pre>
Some run-time information will be displayed on the Command Prompt window and
the results of your Frame3DD analysis will have been appended to the end of the <tt>exA.out</tt> Output Data file.
Data files used primarily for plotting are stored in the <b>%TEMP%\frame3dd_temp</b> folder.
<li>       You may view Output Data files and edit Input Data files
using a good plain text editor
(<a href="http://notepad-plus.sourceforge.net/uk/site.htm">NotePad++</a>,
 <a href="http://www.jedit.org/index.php">jEdit</a>,
 <a href="http://www.vim.org/about.php">gvim</a>),
or a spreadsheet program
(<a href="http://docs.google.com/">GoogleDocs</a>,
 <a href="http://www.openoffice.org/">OpenOffice</a>, Excel).   
<li>Run your own Frame3DD analyses within the Command Prompt window using a command like ...
<pre>
frame3dd  MyFrame.3dd  MyResultsA.out
</pre>
<!-- <li> You may wish to delete all the files in the temporary file directory (c:\temp) after you have finished your analyses.  -->
</ol>

<p>
Use Gnuplot to view the graphical output.
</p>

<ol>
<li>Download the <a href="http://downloads.sourceforge.net/gnuplot/gp424win32.zip">
MS-Windows version of Gnuplot</a>
and save it to your <b>Desktop</b>.
<li> Navigate to <b>Desktop > Gnuplot > bin</b> and 
right click on <b>wgnuplot</b> to create a shortcut to your <b>Desktop</b>.
<li>Clicking on the <b>wgnuplot</b> icon on the Desktop will start Gnuplot.
<li>To load the plot into Gnuplot, first change directory to to location of your output files, by clicking on the <b>ChDir</b> button at the top of the Gnuplot window and navigating to <b>Desktop > Frame3DD > examples</b>.
<li>Display the plots of your structure using Gnuplot with a command like ...
<pre>
      gnuplot>  load 'MyResultsA.plt'
</pre>
where <tt>MyResultsA.out</tt> is the name of of the Output Data file 
specified when running Frame3DD. 
<li>Click <b>OK</b> to see the next plot or <b>Cancel</b> to stop with the current plot.  
<li> To save the current plot as a PostScript file in the Frame3DD/examples folder, use the <tt>saveplot_w32</tt> script included in the Frame3DD/examples folder.
<pre>
     gnuplot>  load 'saveplot_w32'
     gnuplot>  !copy my-plot.ps PlotFileA.ps
</pre>
</ol>


<h4> 3.2.2 Installing from the binary installer </h4>

<ol>
<!-- http://sourceforge.net/project/platformdownload.php?group_id=221386" -->
<li><a href="https://sourceforge.net/projects/frame3dd/files/">
Download</a> and run the binary installer (frame3dd-VERSION.exe).
<li>Use the Start menu to access README information and this documentation.
<li>Copy one or more of the example files (eg <tt>exA.3dd</tt>) from your <b>Program Files\FRAME3DD\examples</b> folder into your <b>My Documents</b> folder
<li>
Open a 'Command Prompt' window (Start > All Programs > Accessories > Command Prompt) in order to add FRAME3DD to your path,  
to change to the directory of example files and run an example:
<pre>
set PATH=%PATH%;c:\Program Files\FRAME3DD
</pre>
Optionally, set a location for your output files using a path of your choice:
<pre>
mkdir c:\temp
set FRAME3DD_OUTDIR=c:\temp
</pre>
Keep the command prompt window open for the following:
<li> You may run <b>Frame3DD</b>, examine the analysis results, visualize the results using Gnuplot, and edit Input Data files
 as described above.  
</ol>

<h4> 3.2.3 Compiling the source on Windows </h4>

<ol>
<li> Install a GCC compatible compiler, such as the 
<a href="http://www.delorie.com/djgpp/"> DJGPP gcc compiler</a>,
the <a href="http://www.cs.virginia.edu/~lcc-win32/"> LCC-win32 compiler</a>,
or the <a href="http://www.mingw.org/"> MinGW compiler</a>.
<!-- http://sourceforge.net/project/platformdownload.php?group_id=221386" -->
<li><a href="https://sourceforge.net/projects/frame3dd/files/">
Download</a> the Frame3DD source-code tarball (frame3dd-VERSION.tar.bz2)
and save it in your home directory.
<li> Unpack the source code, enter the source directory,
and build the code, as follows:
<pre>
gcc -O -o frame3dd main.c frame3dd.c frame3dd_io.c ldl_dcmp.c lu_dcmp.c coordtrans.c eig.c nrutil.c -lm
</pre>
</ol>

<a name="runosx"/><h3>3.3 Mac OS X</h3>

<!-- 
<div class="note"><b>Note:</b> The following binary downloads have not been updated
for some time and may give you problems. You may have more success trying to build
from source following the instructions for Linux/Unix.</div>
-->

<p>
For OS X running on an Intel processor,
you may install Frame3DD from a .ZIP archive 
or you may compile from the source code.
The following instructions install Frame3DD to the <b>Desktop</b> but other directories may be substituted, if desired.  
</p>
  
<h4> 3.3.1 Installing from the .ZIP archive for OS X</h4>

<ol>
<li> Install a good plain text editor for OS X:
 <a href="http://www.jedit.org/index.php">jEdit</a>, or
 <a href="http://www.barebones.com/products/textwrangler/">TextWrangler</a>, or
 <a href="http://macvim.org/OSX/index.php">Vim</a>. 
A tutorial for Vim is <a href="http://www.jerrywang.net/vi/">here</a>. 
<!-- http://sourceforge.net/project/platformdownload.php?group_id=221386" -->
<li><a href="https://sourceforge.net/projects/frame3dd/files/">
Download</a> the Frame3DD .ZIP archive (Frame3DD_VERSION_osx.zip) and save it in your <b>Desktop</b>.
<li> If the .ZIP archive was not automatically unzipped, 
double-click the icon to extract it. 
<li><b>(<i>Recommended</i>)</b>
Put the <b>Frame3DD</b> directory in your path and set the <tt>FRAME3DD_OUTDIR</tt> location.<br>
To do this, open your <b>~/.profile</b> file using your good text editor.<br>
Using jEdit, <b>File > Open </b> and type <b>~/.profile</b> in the <b>File Name:</b> text entry bar.<br>
Using TextWrangler, <b>File > Open Hidden</b> and select <b>.profile</b> from your home directory.<br>
Using Vim, <b>File > Open</b> and select <b>.profile</b> from your home directory.<br>
Cut-and paste the following six lines into the beginning of <b>~/.profile</b> 
<pre>
# for Frame3DD ... http://frame3dd.sourceforge.net/
export PATH=$PATH:$HOME/Desktop/Frame3DD/         # add to the path
if [ ! -d /tmp/frame3dd_temp_$USER ]; then
    mkdir /tmp/frame3dd_temp_$USER                # create a Frame3DD output directory
    echo "creating /tmp/frame3dd_temp_$USER for Frame3DD"
fi
export FRAME3DD_OUTDIR=/tmp/frame3dd_temp_$USER   # specify the Frame3DD output directory
</pre>
... save, and exit the editor.   

<li>
Open a Terminal (Applications > Utilities > Terminal),  
change to the directory of example files and run an example.
<pre>
cd  ~/Desktop/Frame3DD/examples/   # change to the examples directory
frame3dd  exA.3dd  exA.out         # run the program
</pre>
Some run-time information will be displayed on the Terminal and
the results of your Frame3DD analysis will have been appended to the end of the 
<tt>exA.out</tt> Output Data file. Data files used primarily for plotting are stored in the <b>/tmp/frame3dd_temp_$USER</b> directory. 

<!-- 
<ol>
<li>        Download the <b>Frame3DD</b> application and save as "frame3dd" on your Desktop,
         or some other directory:<br> | <a href="http://www.duke.edu/~hpgavin/frame3dd/OSX-PPC/frame3dd">CTRL-CLICK-HERE-FOR-PPC</a> | <a href="OSX-Intel/frame3dd">CTRL-CLICK-HERE-FOR-INTEL</a> |
<li>        Download and save an example Input Data file, such as <tt>exA.3dd</tt>,
         on your Desktop, or some other directory:<br> | <a href="../examples/exA.3dd">CTRL-CLICK-HERE</a> |
<li>        Open a Terminal window (Applications > Utilities > Terminal) and ...<br>
            <tt>...$   cd ~/Desktop</tt><br>
            <tt>...$   chmod +x frame3dd</tt><br>
         Create a plain text file (using
<a href="http://www.barebones.com/products/textwrangler/">TextWrangler</a>) called  <b>~/.profile</b> containing the line:<br>
             <tt>export PATH=".:$PATH:/usr/local/bin"</tt><br>
         Quit the Terminal application.  [APPLE] [Q]
<li>        Run <b>Frame3DD</b> from a Terminal window:  (Applications > Utilities > Terminal) ... <br>
            <tt>...$   cd ~/Desktop</tt><br>
            <tt>...$   frame3dd  example.3dd  example.out</tt><br>
         where <tt>example.3dd</tt> is the name of your Input Data file.
<!-- 
<!-- <li>        Run <b>Frame3DD</b> from a Terminal window  (another way).
             Click on the <b>frame3dd</b> icon in your Desktop.
             A Terminal window should automatically open.
             When asked for the Input/Output file name, type ...<br>
<tt>/Users/your_name_here/Desktop/examples/exA.3dd</tt> -->

<li>     You may view Output Data files and edit Input Data files using a good plain text editor
(<a href="http://www.jedit.org/index.php">jEdit</a>, 
 <a href="http://www.barebones.com/products/textwrangler/">TextWrangler</a>,
 <a href="http://macvim.org/OSX/index.php">Vim</a>) 
or a spreadsheet program
(<a href="http://docs.google.com/">GoogleDocs</a>,
<a href="http://www.openoffice.org/">OpenOffice</a>).
If you use Apple's TextEdit,
make sure you are in Plain Text mode  ...  [SHIFT] [APPLE] [T] ...  or ...   Format > Make Plain Text ... <br>
<li>
Run your own Frame3DD analyses within the Terminal window using a command like ...
<pre>
frame3dd  MyFrame.3dd  MyResultsA.out
</pre>
</ol>

<p>
       The graphical output is viewed with Gnuplot.  You'll need both <a href="
http://darwinports.com/">DarwinPorts</a> and <a href="http://gnuplot.darwinports.com">Gnuplot</a> for OS X.
</p>


<!--
<p>
For a version of Gnuplot for OS X-Intel, or for a version with mouse-scrolling and panning features,
install <a href="http://www.apple.com/macosx/features/x11/">X11</a> and <a href="http://developer.apple.com/tools/">Apple Development Tools</a>, and then <a href="http://maba.wordpress.com/2006/08/02/scientific-plotting-on-mac-os-x-using-gnuplot-and-plot/">compile Gnuplot from sources</a>.
</p>
-->

<ol>
<li> From you Mac's Administrator account, first install DarwinPorts, and then install Gnuplot.<br>
Follow <a href="http://darwinports.com/">these instructions</a> to download and install DarwinPorts.<br>
Follow <a href="http://gnuplot.darwinports.com/">these instructions</a>
to download and install Gnuplot 4.2.5 for OS X.<br>
If this is your first DarwinPorts package installation, it will take several minutes to complete.
<!--
<li>        Test that Gnuplot works.
         Open a Terminal window (Applications > Utilities > Terminal) and 
<pre>
gnuplot
     gnuplot>  plot sin(x)
     gnuplot>  quit
</pre>
-->
<li>        Visualize your <b>Frame3DD</b> analysis output.
         Open a Terminal window (Applications > Utilities > Terminal) and ...
<pre>
gnuplot
     gnuplot>  cd '~/Desktop/Frame3DD/examples'
     gnuplot>  load 'MyResultsA.plt'
</pre>
where <tt>MyResultsA.out</tt> is the name of of the Output Data file specified 
when running frame3dd.
<li>Hit the 'Return' key in the Terminal window to see the sequence of plots
and animations until the <tt> gnuplot></tt> prompt returns.
<li>Save or print plots using [APPLE] [P].<br>
<li>After finishing with your plots, quit Gnuplot by typing ... 
<pre>
      gnuplot>  quit
</pre>
</ol>
</p>


<h4> 3.3.2 Compiling the source on OS X</h4>

<ol>
<li> Install the Xcode development system from your OS X installation DVD.  
<!-- http://sourceforge.net/project/platformdownload.php?group_id=221386" -->
<li><a href="https://sourceforge.net/projects/frame3dd/files/">
Download</a> the Frame3DD source-code tarball (frame3dd-VERSION.tar.bz2)
and save it in your home directory.
<li> Unpack the source code, enter the source directory,
and build the code, as follows:
<pre>
gcc -O -o frame3dd main.c frame3dd.c frame3dd_io.c ldl_dcmp.c lu_dcmp.c coordtrans.c eig.c nrutil.c -lm
</pre>
</ol>


<a name="Matlab"><h2>4. Matlab Interface</h2>

<p>
<b>Frame3DD</b> may optionally be executed from within Matlab on any platform,
via the Matlab interface function <a href="../matlab/frame_3dd.m">frame_3dd.m</a>
<pre>
function [D,R,F,L,Ks] = frame_3dd(XYZ,JTS,RCT,EAIJ,P,U,D)
% [D,R,F,L,Ks] = frame_3dd (XYZ,JTS,RCT,EAIJ,P,U,D)
%
% Solve a a three-dimensional frame analysis problem
%
% INPUT DATA:
%
%  XYZ : a 4xJ matrix containing the XYZ coordinate of each joint
%          row 1 = X-axis coordinate  for each joint
%          row 2 = Y-axis coordinate  for each joint
%          row 3 = Z-axis coordinate  for each joint
%          row 4 = rigid radius       for each joint
%
%  JTS : a 2xB matrix indicating which 2 joints each frame element connects
%          row 1 = the 'starting' joint  for each frame element
%          row 2 = the 'ending'   joint  for each frame element
%
%  RCT : a 6xJ matrix indicated which joints have reactions
%        0: the joint has no reaction in that degree of freedom,
%        1: the joint does have a reaction in that degree of freedom.
%
% EAIJ : a 9xB containing the section and modulus properties of each frame el.
%         row 1 = Ax  cross section area    for each frame el.
%         row 2 = Asy shear area y-directionfor each frame el.
%         row 3 = Asz shear area z-directionfor each frame el.
%         row 4 = Jxx torsional moment of inertia - x axis for each frame el.
%         row 5 = Iyy bending moment of inertia - y axis   for each frame el.
%         row 6 = Izz bending moment of inertia - z axis   for each frame el.
%         row 7 = E   elastic modulus       for each frame el.
%         row 8 = G   shear   modulus       for each frame el. 
%         row 9 = p   roll angle            for each frame el.
%
%    P : a 6xJ matrix containing the components of the external
%        forces and moments applied to each joint.
%          row 1 = Joint Force in X-direction    for each joint
%          row 2 = Joint Force in Y-direction    for each joint
%          row 3 = Joint Force in Z-direction    for each joint
%          row 4 = Joint Moment about X-axis     for each joint
%          row 5 = Joint Moment about Y-axis     for each joint
%          row 6 = Joint Moment about Z-axis     for each joint
%
%    U : a 3xB matrix containing the unif. dist. load on each frame element
%          row 1 = uniform distributed load along the local element x axis
%          row 2 = uniform distributed load in    the local element y axis
%          row 3 = uniform distributed load in    the local element z axis
%
%    D : a 6xJ matrix of prescribed displacements at the reaction DoF's
%          row 1 = prescribed joint displ. in the X-direction for each joint
%          row 2 = prescribed joint displ. in the Y-direction for each joint
%          row 3 = prescribed joint displ. in the Z-direction for each joint
%          row 4 = prescribed joint rot'n  about the X-axis   for each joint
%          row 5 = prescribed joint rot'n  about the Y-axis   for each joint
%          row 6 = prescribed joint rot'n  about the Z-axis   for each joint
%
% OUTPUT DATA:
%
%    D : a 6xJ matrix   of the deflections and rotations of each joint
%    R : a 6xJ matrix   of the reaction forces and moments
%    F : a 12xB matrix  of the end forces of each frame element
%    L : a 1xB vector   of the length of each frame element
%   Ks : a 6Jx6J matrix of the structural stiffness matrix
</pre>
</p>

<p>
This m-function, <a href="../matlab/frame_3dd.m">frame_3dd.m</a>,
executes the system command
(<tt>frame3dd</tt> on Linux or OS X, <tt>frame3dd.exe</tt> on Windows)
to compute the solution.
The <b>Frame3DD</b> executable programs
(<tt>frame3dd</tt> on Linux or OS X, <tt>frame3dd.exe</tt> on Windows)
must be saved to a directory within
a path appropriate for your system, as described in the installation instructions, above.
</p>

<p>
<ol>
<li> The Matlab file for your problem first sets up the various matrices defining the problem for analysis and calls frame_3dd.m <br>
A <a href="../matlab/exA.m">Matlab version of Example A</a> illustrates
how to analyze problems using the Matlab interface to <b>Frame3DD</b>.<br>
Matlab versions of the other examples are forthcoming.
<li> frame_3dd.m writes IOdata.fmm,
<li> The executable program <tt>frame3dd</tt> writes Output Data to IOdata.out ,
and also writes IOdata_out.m, containing the Output Data.<br>
An m-file containing the Output Data is written whenever the frame3dd
executable is run on a file ending in ".fmm",
whether or not the analysis is initiated by frame_3dd.m.
<li> frame_3dd.m runs IOdata_out.m, containing the matrices D, R, F, L, and Ks,
<li> frame_3dd.m returns D, R, F, L, and Ks, to the Matlab workspace, or to your Matlab function.
</ol>
</p>

<p>
This m-function interface to <b>Frame3DD</b>
is currently capable of static analyses.
It does not (yet) implement the following features of <b>Frame3DD</b>:
<ul>
  <li> Matlab functions for graphical display of the results
  <li> point forces applied between the joints of a frame element
  <li> temperature loads
  <li> multiple load cases
  <li> modal analysis
  <li> matrix condensation
</ul>
</p>

<p>
Adding these features would require Matlab programming, only.
</p>

<a name="CSV"><h2>5. Spreadsheet Interface</h2>

<p>
Input Data for <b>Frame3DD</b> may be read and written using spreadsheet programs
(excel,
 <a href="http://docs.google.com/">GoogleDocs</a>,
 <a href="http://www.openoffice.org/">OpenOffice</a>,
 <a href="http://projects.gnome.org/gnumeric/">Gnumeric</a>).
</p>

<p>
Any of the  <a href="http://www.duke.edu/~hpgavin/frame3dd/#examples"><b>Frame3DD</b> example Input Data files</a> may be opened with a spreadsheet program.
When editing an Input Data file with a spreadsheet program, save it in
<tt>.CSV</tt> format (with a "<tt>.CSV</tt>" filename extension).
</p>

<p>
When run on a <tt>.CSV</tt> file,
<b>Frame3DD</b> writes results
as plain text to the named Output Data file and also
writes results of the static analyses to a spreadsheet with a filename ending in "<tt>.CSV</tt>".
For example, running <b>Frame3DD</b> as follows:
<pre>
frame3dd  MyFrame.CSV  MyResultsA.out
</pre>
</p>
<p>
results in the two Output Data files  <tt>MyResultsA.out</tt> and <tt>MyResultsA_out.CSV</tt>.
These <tt>.CSV</tt> files may be viewed, edited, pre-processed, and post-processed with a spreadsheet program.
</p>

<p>
The results spreadsheet file includes an index table specifying the row numbers
of each type of result.   <br>
Sections of an example results spreadsheet are shown below.<br>
<img src="img/CSV1.png" align="center" border="0"><br>
This example has three load cases.  <br> <br>
Displacements for load case 1 start at row 21 and end at row 25.<br>
Frame element end forces for load case 1 start at row 28 and end at row 35.<br>
Reaction forces for load case 1 start at row 38 and end at row 42.<br><br>
Displacements for load case 2 start at row 49 and end at row 53.<br>
Frame element end forces for load case 2 start at row 56 and end at row 63.<br>
Reaction forces for load case 2 start at row 66 and end at row 70.<br><br>
Displacements for load case 3 start at row 77 and end at row 81.<br>
Frame element end forces for load case 3 start at row 84 and end at row 91.<br>
Reaction forces for load case 3 start at row 94 and end at row 98.<br><br>
</p>

<p>
For any <b>Frame3DD</b> .CSV results file, the spreadsheet cells containing the result
row numbers are given in the following table.<br>
<table border="1">
<tr> <th>Load Case 1</th> <th>First Row</th> <th>Last Row</th></tr>
<tr> <td>Joint Displacements</td> <td>C-10</td><td>C-11</td></tr>
<tr><td>Frame Element End Forces</td> <td>D-10</td><td>D-11</td></tr>
<tr><td>Reaction Forces</td> <td>E-10</td><td>E-11</td></tr>
<tr> <th>Load Case 2</th> <th>First Row</th> <th>Last Row</th></tr>
<tr> <td>Joint Displacements</td> <td>C-12</td><td>C-13</td></tr>
<tr><td>Frame Element End Forces</td> <td>D-12</td><td>D-13</td></tr>
<tr><td>Reaction Forces</td> <td>E-12</td><td>E-13</td></tr>
<tr> <th>Load Case 3</th> <th>First Row</th> <th>Last Row</th></tr>
<tr> <td>Joint Displacements</td> <td>C-14</td><td>C-14</td></tr>
<tr><td>Frame Element End Forces</td> <td>D-14</td><td>D-14</td></tr>
<tr><td>Reaction Forces</td> <td>E-14</td><td>E-14</td></tr>
<tr> <td><i>et cetera</i></td> </tr>
</table>
</p>

<p>
The columns of the spreadsheet results file are arranged as follows.<br>
Displacement results are in columns A through G:<br>
<img src="img/CSV2.png" align="center" border="0"><br><br>
Frame element end force results are in columns A through H:<br>
<img src="img/CSV3.png" align="center" border="0"><br><br>
Reaction results are in columns A through G:<br>
<img src="img/CSV4.png" align="center" border="0"><br><br>
</p>

<p>
Modal analysis results are not (yet) written to the .CSV formatted output file.
</p>

<a name="FrameEd"><h2>6. FrameEd</h2>

<p>
<b>Frame_Ed</b> is a Windows GUI for the 20020103 version of <b>Frame3DD</b> (Jan 3, 2002).<br>
 The .zip file <a href="http://www.duke.edu/~hpgavin/frame3dd/DOS/FrameEd.zip">FrameEd.zip</a> includes:
</p>
 <ul>
 <li>the GUI executable, Frame_Ed.exe
 <li>the frame analysis executable, Frame3d.exe, for the 20020103 version
 <li>an example input file, exG.3dd, for the 20020103 version
 <li>a template for the Input Data file, ex2002.3dd, for the 20020103 version
 </ul>
<p>
 Differences between the 2002 and the current versions of <b>Frame3DD</b> are:
</p>
<ul>
 <li> The 2002 version does not support comments in the Input Data.
 <li> The 2002 version does not support multiple load cases.
 <li> The 2002 version does not support roll angles for frame element orientation.
 <li> The 2002 version uses the Jacobi method for modal analysis.
 <li> The 2002 version requires specification of joint masses and inertias for every joint.
 <li> The 2002 version does not support panning of the animation.
 <li> The 2002 version uses Guyan reduction for matrix condensation,
to match the first mode.
</ul>
</a>

<p>Source code for FrameEd is not currently available, and development on this GUI is no longer active.</p>

<a name="structuralmodeling"/><h2>7. Structural Modeling</h2>

<!--
<p>
       For an introduction to the theory of framed structures, check
       <a href="http://www.duke.edu/~hpgavin/ce131/index.html">http://www.duke.edu/~hpgavin/ce131/</a> and <a href="http://www.duke.edu/~hpgavin/ce283/index.html">http://www.duke.edu/~hpgavin/ce283/</a>.
</p>
-->

<h3>7.1 Units</h3>

<p>
The Output Data is formatted using floating point display, not scientific notation.  To
obtain the greatest number of significant digits in the output, use units of force
and length such that the modulus of elasticity occupies three to five figures before
the decimal point.  For example, if the frame to be analyzed is made of steel or
aluminum, use units of (kips (1000 pounds) and inches), or (Newtons, millimeters,
and tonne), or (MegaNewtons, meters, and kilotonnes).
</p>

<p>
It is recommended to write the units used in your analysis in the
<i>title</i> of the analysis and throughout the Input Data files,
as is done in the example Input Data files.

<ul>
<li> 1 inch = 25.4 millimeter = 0.0254 meter
<li> 1 kip = 4 448.221 6 Newton = 0.004 448 221 6 MegaNewton
<li> 1 kip/square inch = 6.894 757 28 Newton/square millimeter = 6.894 757 28 MegaNewton/square meter
<li> 1 kip/cubic inch = 0.027 679 904 593 tonne/cubic millimeter = 27.679 904 593 kilotonne/cubic meter
<li> 1 /deg.F = 1.8 /deg.C
</ul>
</p>

<h3> 7.2 Joints, Coordinates, Support Conditions and Reactions </h3>

<p>
Joint positions are specified by locations in a three-dimensional
Cartesian coordinate system.
Each joint has six coordinates: three translations
in the global <i>X</i>, <i>Y</i>, and <i>Z</i> directions and three rotations about the
global <i>X</i>, <i>Y</i>, and <i>Z</i> axes.
Optionally,
joints may be modeled as "rigid" within a sphere of radius <i>r</i>.
The effects of finite joint sizes are modeled approximately
in the calculation of the frame element stiffness
through the use of an <i>effective beam length</i>, which is the joint-to-joint
length of the frame element less the rigid radii on each end.
All joints are fully moment resisting.   
Semi-rigid connections may be modeled through the use of short frame elements
at the ends of longer members.  
</p>
<img src="img/coords.png" align="center" border="0"><br>

<p>
For two-dimensional (planar) structures the global <i>X</i> direction is horizontal and the global <i>Y</i> direction is vertical.
For three-dimensional structures the global <i>X</i> and <i>Y</i> directions are horizontal and the global <i>Z</i> direction is vertical.
</p>

<p>
Joint numbers should be assigned in a systematic way, moving from
one end of the structural system to the opposite end.  
<!--
Ideally a frame element
will connect every pair of joints with sequential numbers.
-->
</p>

<p>
Support conditions are modeled by fixing the degrees of freedom
collocated with reaction forces.
By default, displacements at the fixed degrees of freedom are zero.
Optionally, displacements at the fixed degrees of freedom may be prescribed
as a type of loading.
Elastic support conditions may be modeled by additional elements
with the desired flexibility.
Static reaction forces at the fixed degrees of freedom are
computed and are appended to the Output Data file.
</p>


<h3> 7.3 Numbering of Frame Element Starting Joints and Ending Joints </h3>

<p>
Frame elements connect pairs of joints.  Each frame element has a 
"starting joint" (element joint 1, J1)
and an "ending joint" (element joint 2, J2),
as described in the <a href="#InputData">Input Data format</a>.
In principle, either joint of the frame element could be joint J1 
and either joint could be J2.  
The assignment of J1 and J2 to the frame element should not affect the results. 
However, to avoid confusion in certain cases, the following guidelines are recommended: <br>
<ul>
<li>In general joint J1 of the frame element should have more negative
coordinates than joint J2 of the element.   </li>
</ul>
</p>
<p>
More specifically, 
specifying element joint 1 location as (<i>x1, y1, z1</i>) and 
element joint 2 location as (<i>x2, y2, z2</i>), 
<ul>
<li>If <i>x1 &#8800; x2</i> then <i>x1</i> should be less then <i>x2</i>.
Joint J2 should be toward the more positive side of the <i>X</i> axis.  
 
<li>If <i>x1=x2</i> and <i>y1 &#8800; y2</i> then <i>y1</i> should be less then <i>y2</i>. 
Joint J2 should be toward the more positive side of the <i>Y</i> axis.  
<li> If <i>x1=x2</i> and <i>y1=y2</i> and <i>z1 &#8800; z2</i> then <i>z1</i> should be less then <i>z2</i>.
Joint J2 should be toward the more positive side of the <i>Z</i> axis.  
</ul>
</p>
<p>
The figure below attempts to illustrate the application of these guidelines.
</p>
<img src="img/j1j2.png" align="center" border="0"><br>

<h3> 7.4 Frame Element Cross Section Properties </h3>

<p>
Cross-sectional properties of frame elements are specified in a local
coordinate system, in which the <i>x</i>-axis of the local coordinate system
is oriented along the axis of the frame element. 
The local <i>y</i>-axis and <i>z</i>-axis are aligned with the principle directions of the shape of the cross section.  
</p>

<h4> 7.4.1 Axial Effects</h4>

<p>
<i>Ax</i> is the cross-sectional area of the frame element, which is given as the cross-sectional area
of the material perpendicular to the local <i>x</i>-axis.   
</p>

<h4> 7.4.2 Shear Effects </h4>

<p>
Shear strains in frame elements are distributed in a relatively complicated manner over the cross section.   
Shear areas are effective cross-sectional areas corresponding to a uniform distribution of shear strain over the cross section.   
The shear area values,  <i>Asy</i> and <i>Asz</i>, fully account for the non-uniform distribution of shear strain in the cross section.     
For slender frame elements
(in which the span-to-depth ratio is greater than 10)
shear deformations contribute only slightly to the overall structural deformation.
For stocky frame elements
(in which the span-to-depth ratio is less than 5)
shear deformations contribute significantly to the overall structural deformation.
The shear area formulas below for circular, square, and rectangular, cross sections provide 
accurate approximations of the exact values of these variables.    
Regardless of the section shape, the shear areas <i>Asy</i> and <i>Asz</i> are less than the cross section area <i>Ax</i>. 
</p>

<h4> 7.4.3 Torsion Effects </h4>

<p>
Polar Moments of Inertia depend on the shape of the cross-section.
For sections with a circular cross section:   <br>
<i>Jxx = Iyy + Izz </i>

<p>
For sections with a solid rectangular cross section
(width=<i>b</i>, depth=<i>d</i>  <i>( b < d ) </i>):   <br>
<i>Jxx =  Q d b<sup>3</sup>   </i><br></i>
where
<i>Q = 1/3 - 0.2244 / (d/b + 0.1607); </i>
<!-- a = 0.224435; b = 0.160705 -->
<br>
<img src="img/tors.jpg" align="center" border="0"><br>
For more details, see page 271 of Timoshenko and Goodier (1951).
</p>

<p>
For open sections made up of thin plates (length=<i>b</i>, thickness=<i>t</i>):   <br>
<i>Jxx = &Sigma;<sub>i</sub> [  b<sub>i</sub> t<sub>i</sub><sup>3</sup> / 3 ] </i>
</p>

<p>
For closed single-box sections made up of thin plates (length=<i>b</i>, thickness=<i>t</i>): <br>
<i> Jxx = 4 A<sup>2</sup> / &Sigma;<sub>i</sub> [ b<sub>i</sub> / t<sub>i</sub> ] </i><br>
where <i>A</i> is the area enclosed by the box.  
</p>

<p>
Restraints to <a href="http://www.archoneng.com/tptasm.html">warping deformation</a> are not considered in the analysis.
</p>

<h4> 7.4.4 Bending Effects </h4>

<p>
The bending moments
of inertia, <i>Iyy</i> and <i>Izz</i>, are the principle bending moments of inertia for the cross section.
</p>

<!--
<p>
     The frame element cross section shapes are assumed to be symmetric about
     both the local <i>Y</i>-axis and the local <i>Z</i>-axis.  By 'rolling' the frame element about
     the local <i>x</i>-axis, however,  transverse loads in the local <i>y</i>-direction can
     cause bending about both the <i>Z</i>-axis and the <i>Y</i>-axis and shear deformation
     in both the <i>Y</i>-direction and <i>Z</i>-direction.
</p>
-->


<h4> 7.4.5 Cross Section Properties of Circular Tube, Square Tube and Rectangular Tube Sections </h4>

<img src="img/Tsections.png" align="center" border="0"><br>

<p>
Circular Tube (outer radius= <i>R<sub>o</sub></i>, inner radius = <i>R<sub>i</sub></i>):
<ul>
<li> <i>Ax = &pi; ( R<sub>o</sub><sup>2</sup> - R<sub>i</sub><sup>2</sup> )</i>
<li> <i>Asy = Asz = Ax / ( 1.124235 + 0.055610(R<sub>i</sub>/R<sub>o</sub>) + 1.097134(R<sub>i</sub>/R<sub>o</sub>)<sup>2</sup> - 0.630057(R<sub>i</sub>/R<sub>o</sub>)<sup>3</sup> )</i> &plusmn; 0.5% 
<li> <i>Asy = Asz = Ax / ( 1.06124 + 0.59546(R<sub>i</sub>/R<sub>o</sub>) ) </i> &plusmn; 2%
<li> <i>Jxx = (1/2) &pi; ( R<sub>o</sub><sup>4</sup> - R<sub>i</sub><sup>4</sup> )</i>
<li> <i>Ixx = Iyy = (1/4) &pi; ( R<sub>o</sub><sup>4</sup> - R<sub>i</sub><sup>4</sup> )</i>
</ul>
</p>


<p>
Square Tube (outer dimension = <i>b</i> x <i>b</i>, wall thickness = <i>t</i>):
<ul>
<li> <i> Ax = b<sup>2</sup> - (b - 2t)<sup>2</sup></i>
<li> <i> Asy = Asz = Ax / ( 2.08334 - 0.70154(t/b) - 8.00313(t/b)<sup>2</sup> + 12.22572(t/b)<sup>3</sup> )</i> &plusmn; 0.5%
<li> <i> Asy = Asz = Ax / ( 2.1186 - 1.9900(t/b) )</i> &plusmn; 2%
<li> <i> Jxx =  (b - t)<sup>3</sup> t </i>
<li> <i> Izz = Iyy = (1/12) ( b<sup>4</sup> - (b - 2t)<sup>4</sup> )</i>
</ul>
</p>


<p>
Rectangular Tube (outer dimension = <i>a</i> x <i>b</i>, wall thickness = <i>t</i>):
<ul>
<li> <i> Ax = ab -  (a - 2t)(b - 2t)</i>
<li> <i> Asy = Ax / ( 1.14766  + 0.28187(t/b) + 0.96199(b/a) - 2.17742(t/a) )</i> &plusmn; 1% ... <b>(a > b)</b>
<li> <i> Asy = Ax / ( 1.10498 - 1.98518(t/a) + 8.74762(t/a)<sup>3</sup> + 0.99548(b/a) + 0.69146(tb/a<sup>2</sup>) - 5.36255(t<sup>2</sup>b/a<sup>3</sup>) )</i> &plusmn; 1% ... <b>(b > a)</b>
<li> <i> Asz = Ax / ( 1.10498 - 1.98518(t/b) + 8.74762(t/b)<sup>3</sup> + 0.99548(a/b) + 0.69146(ta/b<sup>2</sup>) - 5.36255(t<sup>2</sup>a/b<sup>3</sup>) )</i> &plusmn; 1% ... <b>(a > b)</b>
<li> <i> Asz = Ax / ( 1.14766  + 0.28187(t/a) + 0.96199(a/b) - 2.17742(t/b) )</i> &plusmn; 1% ... <b>(b > a)</b>
<li> <i> Jxx =  2 t (a - t)<sup>2</sup>(b - t)<sup>2</sup> / (a + b - 2t) </i>
<li> <i> Iyy = (1/12) ( ab<sup>3</sup> - (a - 2t)(b - 2t)<sup>3</sup> )</i>
<li> <i> Izz = (1/12) ( a<sup>3</sup>b - (a - 2t)<sup>3</sup>(b - 2t) )</i>
</ul>
</p>

<!-- 
Asy coefficients
 1.114691 0.552486 -1.234540 1.576674 1.053296 -0.081960 -2.192489 0.027438
 1.14766  0.28187      0.96199            -2.17742

Asz coefficients
 1.158912 -2.291419 1.223522 7.370911 0.964439 0.004778 0.718828 -5.417298
 1.10498  -1.98518           8.74762  0.99548           0.69146  -5.36255
-->

<h4> 7.4.6 Cross Section Properties Of Some Common Steel Sections</h4>

<ul>

<li><a href="http://en.wikipedia.org/wiki/Structural_steel">Structural Steel</a>
<li><a href="http://www.engineersedge.com/standard_material/Steel_ibeam_properties.htm">Steel W-section I beams #1</a>
<li><a href="http://www.engineersedge.com/standard_material/Steel_ibeam_properties_2.htm">Steel W-section I beams #2</a>
<li><a href="http://www.engineersedge.com/standard_material/Steel_ibeam_s_properties.htm">Steel S-section I beams</a>
<li><a href="http://www.engineersedge.com/standard_material/Steel_angle_properties.htm">Steel Angles #1</a>
<li><a href="http://www.engineersedge.com/standard_material/Steel_angle_properties_2.htm">Steel Angles #2</a>
<li><a href="http://www.engineersedge.com/standard_material/Steel_channel_properties.htm">Steel Channels</a>
<li><a href="http://www.engineersedge.com/I_beams_aluminum.htm">Aluminum I beam</a>
<li><a href="http://www.engineersedge.com/channel_aluminum.htm">Aluminum Channels</a>
</ul>

<p>
I sections (depth = <i>d</i>, width = <i>b</i>, flange thickness = <i>t</i>, web thickness = <i>w</i>):
</p>

<img src="img/Isection.png" align="center" border="0"><br>

<ul>
<li> <i> Ax = bd  - (d-2t)(b-w)</i>
<li> <i> Asy = 1.64 b t </i>
<li> <i> Asz = d w </i>
<li> <i> Jxx = (1/3) ( 2 b t<sup>3</sup> + d w<sup>3</sup> ) </i>
<li> <i> Iyy = (1/12) ( bd<sup>3</sup> - (b-w)(d-2t)<sup>3</sup> )</i>
<li> <i> Izz = (1/12) ( 2 t b<sup>3</sup> + (d-2t)w<sup>3</sup> ) </i>
</ul>
</p>

<!-- <li><a href="http://www.aisc.org/Content/NavigationMenu/ePubs/ePubs_Home/AISC_SHAPES_DATABASE/AISC_SHAPES_DATABASE.htm">AISC Shapes Database</a>-->

<!--
efunda
<ul>
<li><a href="http://www.efunda.com/math/areas/RolledSteelBeamsW.cfm">Steel W-section I beams</a>
<li><a href="http://www.efunda.com/math/areas/RolledSteelBeamsS.cfm"> Steel S-section I beams</a>
<li><a href="http://www.efunda.com/math/areas/RolledSteelChannels.cfm">Steel Channels</a>
<li><a href="http://www.efunda.com/math/areas/RolledSteelBeamsL.cfm">Steel Angles</a>
<li><a href="http://www.efunda.com/math/areas/AluminumIbeams.cfm">Aluminum I beams</a>
<li><a href="http://www.efunda.com/math/areas/AluminumChannels.cfm">Aluminum Channels</a>
</ul>
-->

<h4> 7.4.7 Cross Section Properties Of Some Standard Wood Sections</h4>

<pre>
             Ax      Asy     Asz     Jxx     Iyy     Izz
             in^2    in^2    in^2    in^4    in^4    in^4

     2x3    3.750   2.500   2.500   1.776   1.953   0.708
     2x4    5.250   3.500   3.500   2.875   6.359   0.984
     2x5    6.750   4.500   4.500   3.984  11.390   1.266
     2x6    8.250   5.500   5.500   5.099  20.800   1.547
     2x8   10.850   7.233   7.233   7.057  47.630   2.039
     2x10  13.880   9.253   9.253   9.299  98.930   2.602
     2x12  16.880  11.253  11.253  11.544 178.000   3.164
     2x14  19.880  13.253  13.253  13.790 290.800   3.727
</pre>

<h3> 7.5 Approximate Properties of Structural Materials </h3>

<p>
<pre>
     Thermal      Modulus
       Young's       Shear         Expansion     Mass          per
       Modulus       Modulus       Coefficient   Density       Density
       E             G             a             d             E/d
       N/mm^2        N/mm^2        /deg.C        T/mm^3        mm^2/s^2
  
Steel A36             200000        79300         11.7e-6       7.85e-9       2.55e13
Boron  Fiber-Epoxy    106000        38000         30.0e-6       2.00e-9       5.30e13
Carbon Fiber-Epoxy     83000        30000         30.0e-6       1.54e-9       5.39e13
Aluminum 2024-T4       73100        28000         23.2e-6       2.78e-9       2.63e13
Aluminum 6061-T6       68900        26000         23.6e-6       2.70e-9       2.55e13
Kevlar Fiber-Epoxy     40000        50000         30.0e-6       1.40e-9       2.86e13
Glass  Fiber-Epoxy     22000        80000         30.0e-6       1.97e-9       1.12e13
Magnesium AM1000A      44800        17500         25.2e-6       1.80e-9       2.49e13
Douglas Fir            12400         4600         30.0e-6       0.50e-9       2.48e13

</pre>
</p>

<p>
Note:
</p>
<ul>
<li> These material properties are approximate.
<li> Properties of Douglas Fir vary naturally by +/- 15 percent.
<li> Properties of Fiber-Epoxy composites depend on the volume fraction and
   orientations of the fibers.  <br>
   The values above correspond to volume fractions of roughly 50 percent.
</ul>
<p>
<a href="http://www.matweb.com/search/MaterialGroupSearch.aspx">MatWeb</a>
lists properties of other materials.
</p>

<h3> 7.6 Frame Element Coordinate Transformation</h3>

<p>
When a frame element is placed into the structure
it is translated and rotated and optionally rolled about
its local <i>x</i>-axis.  
</p>

<p>
The default coordinate transformation process starts with the frame 
element's centroidal axis placed along the global <i>X</i>-axis, and the principle
axes of the cross section (the local <i>x</i> and <i>y</i> axes) are aligned with the global <i>Y</i>- and <i>Z</i>-axes
and must coincide with the principle axes of the cross section.
To place the frame element in the structure, first it is rotated about the
global <i>Y</i>-axis, then about the global <i>Z</i>-axis, then 'rolled' or spun
about the local <i>x</i>-axis.   If the roll angle, <i>p</i>, is zero, this process results
in a transformation for which loads in the global <i>Z</i>-direction will cause no
cross-axis bending.   In this code, this type of coordinate transformation is
called "<i>Z</i>-axis is vertical" and is selected primarily for the sake of visualization
with Gnuplot, in which the <i>Z</i>-axis is vertical for all three-dimensional plots.
</p>

<p>
Another, more customary, coordinate transformation process is also
implemented in the software.  
In the alternative coordinate transformation process, the frame element
is first rotated about the global <i>Z</i>-axis, then about the
global <i>Y</i>-axis, then rolled about the local <i>x</i>-axis.  
If the roll angle is zero,
this transformation results in a frame element with no cross-axis bending due to
loads are applied in the global <i>Y</i>-direction.   In the code, this type of
transformation is called "<i>Y</i>-axis is vertical."   
For a derivation of the alternative coordinate transformation method, refer
to section 8.3 of the textbook <i>Matrix Analysis of Structures</i>
by A. Kassimali.
</p>

<p>
By allowing the frame element to be
'rolled' about its local <i>x</i>-axis during the stiffness matrix
assembly process, cross-axis bending effects may be included.
Issues related to rolling of cross sections and cross-axis bending
are important for three-dimensional structural systems or planar
structures with out-of-plane deformation, such as grillages.  For planar
structures with deformations only in the plane, these issues do not arise.
In addition, these issues do not arise for three-dimensional structures
made entirely of elements for which <i>Iyy=Izz</i>, i.e., square and circular cross sections.
To reiterate, in 2D frames,
the roll angle <i>p</i> does not matter,
and can be set to 0 (zero) for all frame elements.  
For frame elements with doubly-symmetric sections (e.g., circular or square)
the roll angle <i>p</i> does not matter, and can be set to 0 (zero).   
For 3D frames made of non-circular or non-square sections and all
frame elements are aligned with the global X, Y, or Z axes then 
the roll angle <i>p</i> 
might matter but <i>p</i> would probably be either "0" or "90 degrees."
Again, for planar structures,
with no out-of-plane bending, which lie in the global <i>X-Y</i>, <i>Y-Z</i>, or <i>X-Z</i> planes,
and for structures made entirely of bars with Iyy=Izz, the roll angle, <i>p</i> may be set to zero.  
</p>


<p>
Coordinate transformations do not currently consider the effect of
finite joint sizes, and are based on joint-to-joint lengths of each
frame element.
</p>


<h3> 7.7 Connections</h3>

<p>
All connections in a <b>Frame3DD</b> analysis are moment-resisting.
Internal hinges may be modeled using a short element with
low values of <i>Jxx</i>, <i>Iyy</i>, and <i>Izz</i>.
Many connections are more realistically modeled as having some flexibility.
Such semi-rigid connections may be modeled through the inclusion of short
frame elements with appropriate section and material properties to model
the behavior of the connection.   
Frame elements may be considered infinitely rigid within a sphere of a specified radius,
<i>r</i> around a joint.
The effects of finite joint sizes are modeled approximately
in the calculation of frame element stiffness
through the use of an <i>effective beam length</i>, which is the joint-to-joint
length of the frame element less the rigid radii on each end.
</p>

<p>
To analyze a structure as a "truss" with this software, specify <i>Jxx</i>, <i>Iyy</i>, and <i>Izz</i>
to be much smaller than they would be normally, but not zero.   If the shear forces and bending
moments in the structural elements are small, then the structural model
represents a "truss" approximation of the actual structure.    
Shear deformation effects and geometric stiffness effects should <b>not</b> be incorporated if  <i>Jxx</i>, <i>Iyy</i>, and <i>Izz</i> are made very small.  
See Frame3DD example A.
</p>

<h3> 7.8 Shear Deformation, Geometric Stiffness, and Buckling </h3>

<p>
     The <b>Frame3DD</b> analysis will optionally include the effects of shear deformation and/or geometric stiffness.
The geometric stiffness matrix includes the effects of axial forces
on bending and warping-torsional behaviors.
When both shear deformations and geometric stiffness effects are included, the geometric stiffness matrix includes shear deformation effects.
If shear deformation effects are not to be included, simply set the <i>shear</i>
variable to zero (0).  If shear deformation effects are neglected then the
values for the shear areas <i>Asy</i> and <i>Asz</i> <b>are not</b> used in the calculations.
Any non-zero value for <i>Asy</i> and <i>Asz</i> will do.
</p>

<p>
To determine the buckling load of a structure, include geometric stiffness
effects and increase the loads until the stiffness matrix ceases to be positive-
definite.   Additionally, you may compute the fundamental natural frequency of
the structure and observe how the fundamental frequency decreases with increased
loading.  In principle, the fundamental frequency is zero when the loads are at the buckling
load.
</p>

<p>
If geometric stiffness effects are included in the analysis and if the loads
are close to the buckling load of the structure, then it is recommended to put
two or three joints along each frame element.  (i.e. divide each frame element
into three or four segments).   Including these extra joints is strongly
recommended if a buckling analysis is to be performed.
</p>

<p>
Whenever geometric stiffness effects are included, the analysis is non-linear
and superposition does not hold.  
<!--
The geometric stiffness matrix is a secant stiffness matrix.  
-->
In most cases the geometric stiffness matrix lies between the
un-stressed stiffness matrix and the tangent stiffness matrix.
</p>


<h3> 7.9 Loads</h3>

<p>
Six types of static loads may be specified:
</p>
<ul>
<li>Concentrated static force loads and concentrated static moments may be applied to joints.
These loads are specified in the structure's global coordinate system.  
<li>Concentrated static force loads may be applied to frame elements between the joints.
These loads are specified in the frame element's local coordinate system.  </li>
<li>Uniformly distributed static loads may be applied in the local element coordinate system over entire length of frame elements.
Uniformly distributed loads may be applied in the local <i>x</i> direction,
the local <i>y</i> direction, and the local <i>z</i> direction.</li>
<li>Trapezoidally distributed loads may be applied in the local coordinate system over a partial length of frame elements.
Trapezoidally distributed loads may be applied in the local <i>x</i> direction,
the local <i>y</i> direction, and the local <i>z</i> direction.
Trapezoidally distributed loads are specified by the distances along
the local <i>x</i> axis where the loading starts and stops, and
by the value of the load at the starting location and the stopping location.
The starting location for a trapezoidal load must be greater than 0 and less
than the stopping location of the trapezoidal load.
The stopping location for a trapezoidal load must be greater than the
starting value of the trapezoidal load and less
than the length of the frame element.
Fixed end forces computed from trapezoidal loads include the effects of
shear deformation when shear deformation is utilized in the analysis.</li>
<li>Thermal loads assume a linear temperature gradient through cross sections.</li>
<li>Static joint displacements may be prescribed at fixed degrees of freedom only.
Static joint displacements are specified in the structure's global coordinate system.  
</ul>
<p>
Multiple static load cases are generated by specifying
<a href="#Variables">the variable nL</a>
in the
<a href="#InputData">Input Data file</a>, and by specifying the six types of loads for each load case,
as shown in <a href="../examples/exA.3dd">Frame3DD example A</a> and
<a href="../examples/exB.3dd">Frame3DD example B</a>.
</p>

<p>
More than one load of the same type on the same element or joint may be specified.   
For example, one or more trapezoidally distributed loads may be applied to
the same frame element in the same load case.   
</p>

<p>
Whenever the average axial strain in a frame element (<i>Nx/(EAx)</i>) exceeds 0.001 (0.1%) in magnitude, a warning message is displayed indicating the strain level and the element in question.    Most structural materials yield at strains between
0.1% and 0.2%.   When this warning message is displayed the structure is likely in an overloaded condition and the loads should be reduced.
Note that this check for overloaded elements provides an approximate stress check.
A more complete stress check would compute
the composite axial, shear, torsion and bending stresses and strains within each element.   
Such a check requires additional cross section information: 
the section moduli and the section dimensions.  
</p>

<h3> 7.10 Dynamic Modal Analysis </h3>

<p>
The <b>Frame3DD</b> analysis will optionally include a dynamic analysis for natural modes of vibration.
Dynamic properties may be obtained for the un-stressed or the stressed
structure by either neglecting or including geometric stiffness effects.
The mass may be modeled using either the consistent mass matrix or the
lumped mass matrix.
</p>

<p>
The natural frequencies and mode-shapes of the structural frame may be computed from the stiffness and mass matrices using either the Stodola method or
the Jacobi method.    The solution method and the convergence tolerance for these iterative methods is specified in the Input Data file.
If a dynamic modal analysis is to be carried out,
the Input Data file must also specify the mass density of each frame element,
additional mass carried by the frame element, and extra mass or inertia
carried by the joints.
A specified set of modes may be animated within Gnuplot.
</p>

<p>
<b>Frame3DD</b> has the capability of computing the natural frequencies
and mode-shapes of frames that are
fully restrained, partially restrained, or completely un-restrained.
Partially restrained frames have up to six independent rigid body modes.
A completely un-restrained frame has six independent rigid body modes.
The stiffness matrix for
partially restrained and completely unrestrained structures is not invertible.
Such structural configurations can not carry static loads.
Furthermore, the numerical methods used in computing the
natural frequencies and mode shapes presume that the stiffness matrix
is invertible.
A  numerical trick called "frequency shifting" overcomes this difficulty.
Presuming the mass matrix [<i>M</i>] is
invertible, and given a <i>sufficiently large</i> positive scalar value <i>s</i>, the matrix [[<i>K</i>] + <i>s</i>[<i>M</i>]] is invertible,
even if the stiffness matrix [<i>K</i>] is not invertible.
So, for the purpose of computing the natural frequencies of frames
with rigid-body modes, [<i>K</i>] is replaced by
[[<i>K</i>]+s[<i>M</i>]].
The desired natural frequencies
are shifted by an amount equal to the "shift" variable, <i>s</i>,
and are shifted back, after the natural frequencies and mode shapes are found.
The mode shapes are un-changed by this "shifting."
If natural frequencies are computed as "nan" (not a number)
try increasing the value of the frequency shift variable
either in the Input Data file or using the
<a href="#commandline"><i>-f</i> command line option</a>.
Structural models that are partially restrained or unrestrained should not 
include geometric stiffness effects.   
</p>

<p>
A Sturm check is carried out to determine if any eigen-values were missed.
</p>

<p>
If a dynamic analysis is not to be performed, simply set the
<a href="#Variables"<i>nM</i> variable</a> (the number of desired modes) to zero (0).
If <i>nM</i> is set to zero,
<b>Frame3DD</b> will stop reading the Input file at this point.
If <i>nM</i> is set to zero, there is no need to provide numerical values for the quantities after the <i>nM</i> variable.  
<!--
(See the
<a href="#InputData"><b>Input Data Format</b></a> specification and
<a href="#Variables"><b>Variable Definitions</b></a>
below.)
-->
</p>

<h3> 7.11 Matrix Condensation</h3>

<p>
Reduced order stiffness and mass matrices may be computed via a static
condensation, Guyan reduction, or dynamic condensation.  The condensed mass
and stiffness matrices are saved as text files called Kc and Mc.  
The Guyan reduction
method is generalized so that the condensed matrices match the fundamental
frequency of the original structure exactly.  The dynamic condensation method
is a pseudo-inverse-modal-matrix method, and the resulting condensed mass and
stiffness matrices may be ill-conditioned.  The pseudo-inverse of the modal
matrix is computed using a regularization method which somewhat improves the
conditioning of the condensed mass and stiffness matrices.
</p>

<h3> 7.12 End Force Sign Convention</h3>

<p>
The frame element end forces listed in the Output data file adhere to a
sign convention determined by the local coordinate system of the frame element.
The local coordinate system of the frame element has its origin at joint 1 of the frame element.   
The local <i>x</i> axis lies along the element, from joint 1 to joint 2.  
The local <i>y</i> and <i>z</i> axes are aligned with the principle axes of the frame element cross section.   
The frame element end forces are designated as
<i>Nx</i>, <i>Vy</i>, <i>Vz</i> for the axial force and end shears 
in the local <i>y</i> and <i>z</i> directions; and 
<i>Tx</i>, <i>My</i>, <i>Mz</i> for the torsional moment and bending moments
about the local <i>y</i> and <i>z</i> axes.  
The sign convention for frame element end forces is shown in the figure below.
The double-headed arrows adhere to the "right hand rule."
<img src="img/sign_convention.png" align="center" width="800" border="0"><br>
</p>

<p>
The mathematical signs of the member end forces are 
relative to the local <i>x-y-z</i> axes of the frame element
and designate the direction of the force along those axes.  
A positive <i>Nx</i> at joint 1
of the member is compressive, while a negative <i>Nx</i> at joint 2 is also
compressive.  The opposite is true for tension.
The Output Data lists a "t" or a "c" along with the axial forces (<i>Nx</i>)
in order to help clarify whether the end force is putting the frame element
into <b>t</b>ension or <b>c</b>ompression.  
A frame element with positive <i>My</i> at joint 1 and a negative <i>My</i> at joint 2
has positive curvature in the <i>x-z</i> plane.  
A frame element with negative <i>Mz</i> at joint 1 and a positive <i>Mz</i> at joint 2
has positive curvature in the <i>x-y</i> plane.  
</p>

<a name="numerical"/><h2>8. Numerical Details</h2>

<p>
<b>Frame3DD</b> imposes no limit on the number of degrees of freedom.
Dynamic memory allocation is accomplished by the public-domain routines
found in Press, W.H., et al,  <i>Numerical Recipes In C</i>, (Cambridge, England: Cambridge University Press, 1991).
</p>

<p> 
<b>Frame3DD</b> analyzes the response to temperature loads alone prior to solving for the response to the combination of temperature loads and mechanical loads.In this way, temperature loads may be used to simulate the effect of pre-tension in structures, which can provide geometric stiffness.    
For each load case <b>Frame3DD</b> carries out the following nine steps:
<ol>
<li> Assemble the structural stiffness matrix for the un-stressed structure.

<li>Compute the joint displacements due to temperature loads using a linear elastic analysis.

<li>Compute frame element end forces from the displacements due to temperature loads.

<li>Assemble the structural stiffness matrix again.<br>
If goemetric stiffness effects are to be considered,
the assembly process makes use of
the axial frame element forces arising from the temperature loads.

<li>Compute the joint displacements due to mechanical loads.

<li>Add the joint displacements due to mechanical loads to the joint displacements due to temperature loads.

<li>Compute frame element end forces from the displacements due to the combined temperature and mechanical loads.

<li>If geometric stiffness effects are to be considered, carry out quasi Newton-Raphson iterations to converge upon the displacements that satisfy equilibrium.<br>
The assembly process makes use of
the axial frame element forces arising from the combined temperature and mechanical loads.

<li>Compute the "RMS relative equilibrium error."

</ol>
</p>

<p>
Solutions of the matrix equation, <i>K d = f</i>, make use of LDL'
decomposition/back-substitution with sparse-matrix short-cuts and
iterative improvement for enhanced speed and accuracy.
</p>

<p>
When the program is executed, various solution errors are displayed to the
screen and are written to the Output Data file.   Iterative improvements
to the LDL' back-substitution make use of a quasi Newton-Raphson method:<br>
<div class=eq>K dD(i) = F - K D(i)</div>
<div class=eq>D(i+1) = D(i) + dD(i)</div>
<p>
where
</p>
<ul>
<li> <i>D(i) </i>   is the displacement vector at iteration <i>i</i> ,
<li> <i>K </i>     is the stiffness matrix ,
<li> <i>F </i>     is the applied load vector ,
<li> <i>dD(i) </i>  is the incremental displacement vector at iteration <i>i</i> , and
<li> <i>D(i+1)</i>  is the displacement vector at iteration <i>i+1</i>
</ul>

<p>
At each LDL' back-substitution iteration, the equilibrium error is displayed
to the screen as the "RMS equilibrium precision."  This error is the root-mean-square of
<i>dD(i)</i>.
Iterations are stopped when this error decreases by less than ten percent in an iteration.
</p>

<p>
When geometric stiffness effects are included, the solution is obtained
iteratively, using a quasi Newton-Raphson method:
</p>
 <div class=eq>K(D(i)) dD(i) = F - K(D(i)) D(i)</div>
 <div class=eq>D(i+1)  =  D(i) + dD(i)</div>
<p>
where
</p>
<ul>
<li>   <i>D(i)  </i>  is the displacement vector at iteration <i>i</i>,
<li> <i>K(D(i))  </i>is the secant stiffness matrix at displacements <i>D(i)</i>
<li> <i>F </i>     is the applied load vector ,
<li> <i>dD(i) </i>  is the incremental displacement vector at iteration <i>i</i> , and
<li> <i>D(i+1)</i>  is the displacement vector at iteration <i>i+1</i>
</ul>
<p>
At each Newton-Raphson iteration, the relative equilibrium error is displayed
to the screen.   This error is the root-mean-square of (<i>F - K(D(i)) D(i)</i>)
divided by the root-mean-square of <i>F</i>.   Newton-Raphson iterations stop when
this error is less than the convergence tolerance.  The convergence tolerance
is specified as the convergence tolerance for the modal-analysis.
The default value is 0.00001
</p>

<p>
The accuracy of the final solution is checked using a global equilibrium check
and the equilibrium error is reported.  The "RMS relative equilibrium precision" is
the root-mean-square of internal frame element forces and external applied loads at
every un-restrained degree of freedom normalized by the root-mean-square of
the applied loads.   This equilibrium error is typically less than one part
in one-billion when geometric stiffness effects are neglected.  If an analysis
has an "RMS relative equilibrium precision" larger than 0.001, the results should not be
trusted.
</p>

<p>
If the "RMS relative equilibrium precision" is not adequately small
and geometric stiffness effects <i>are not</i> included in the analysis,
try including the effects of geometric stiffness by changing
the geometric stiffness variable <i>geom</i>
in the Input Data file to <i>1</i> or by using the
<a href="#commandline"><i>-gOn</i> command line option</a>.
Conversely, if the "RMS relative equilibrium precision" is not adequately small
and geometric stiffness effects <i>are</i> included in the analysis,
try neglecting the effects of geometric stiffness by changing
the geometric stiffness variable <i>geom</i>
in the Input Data file to <i>0</i> or by using the
<a href="#commandline"><i>-gOff</i> command line option</a>.
</p>

<p>
Natural frequencies and mass-normalized mode-shapes of the lower modes may be
obtained using a generalized Jacobi sub-space iteration procedure
or a Stodola iteration procedure.
Jacobi-subspace iterations are stopped when the frequency convergence error is less than the specified
frequency convergence tolerance.  The frequency convergence error is defined here as:
</p>
 <div class=eq>error = | fN(i) - fN(i-1) | / fN(i) </div>
<p>where</p>
<ul>
<li><i> fN(i)</i>    is the highest natural frequency computed at iteration <i>i</i> ,
<li><i>fN(i-1)</i>  is the highest natural frequency computed at iteration <i>i-1</i> ,
</ul>

<a name="InputData"><h2>9. Input Data Format</h2>
<p>
Click <a href="template.3dd">here</a> to download an Input Data template, template.3dd, or cut-and-paste the text below.
</p>
</a>

<pre>
A one-line descriptive title of your analysis MUST be the FIRST line of the file

% joint data ...
nJ       % number of joints
  J[1]       x[1]       y[1]       z[1]     r[1]
    :          :          :          :        :  % joint numbers and coordinates
  J[nJ]      x[nJ]      y[nJ]      z[nJ]    r[nJ]

% reaction data ...
nR       % number of joints with reactions
  J[1]    Rx[1]   Ry[1]   Rz[1]   Rxx[1]  Ryy[1]  Rzz[1]
    :        :       :       :        :       :       :       % 0:free, 1:fixed
 J[nR]    Rx[nR]  Ry[nR]  Rz[nR]  Rxx[nR] Ryy[nR] Rzz[nR]

% frame element data ...
nB       % number of frame elements
         % frame element numbers, loc'ns, and prop's
M[1]  J1[1]  J2[1]  Ax[1]  Asy[1]  Asz[1]  Jxx[1]  Iyy[1]  Izz[1]  E[1]  G[1]  p[1]
  :      :      :      :       :       :       :       :       :     :     :     :
M[nB] J1[nB] J2[nB] Ax[nB] Asy[nB] Asz[nB] Jxx[nB] Iyy[nB] Izz[nB] E[nB] G[nB] p[nB]

shear % 1: include shear deformation;   0: don't
geom  % 1: include geometric stiffness; 0: don't
exagg % exaggerate deformations


% load data ...
nL       % number of static load cases, up to 63
% begin static load case 1 ---------------------------------------------------
nF       % number of loaded joints
  J[1]    Fx[1]   Fy[1]   Fz[1]   Mxx[1]  Myy[1]  Mzz[1]
    :        :       :       :        :       :       :          % nodal forces
  J[nF]   Fx[nF]  Fy[nF]  Fz[nF]  Mxx[nF] Myy[nF] Mzz[nF]

nU          % number of uniform distributed loads
  M[1]    Ux[1]   Uy[1]   Uz[1]
    :        :       :       :     % uniform distributed loads in local coordinates
  M[nU]   Ux[nU]  Uy[nU]  Uz[nU]

nW     % number of trapezoidally distributed loads
  M[1]  xx1[1]  xx2[2]  wx1[1]  wx2[1]   % locations and loads - local x-axis
        xy1[1]  xy2[2]  wy1[1]  wy2[1]   % locations and loads - local y-axis
        xz1[1]  xz2[2]  wz1[1]  wz2[1]   % locations and loads - local z-axis
    :       :       :       :       :
  M[nW] xx1[nW] xx2[nW] wx1[nW] wx2[nW]  % x1 and x2: start and end locations
        xy1[nW] xy2[nW] wy1[nW] wy2[nW]  % w1 and w2: start load and end load
        xz1[nW] xz2[nW] wz1[nW] wz2[nW]  % 0 < x1 < x2 < L

nP           % number of concentrated point loads
  M[1]    Px[1]   Py[1]   Pz[1]   x[1]     %  point loads in local coordinates
    :        :       :       :      :      %  and x=distance from coordinate J1
  M[nP]   Px[nP]  Py[nP]  Pz[nP]  x[nP]

nT          % number of frame elements with temperature changes
  M[1]  a[1]   hy[1]   hz[1]   Ty+[1]  Ty-[1]  Tz+[1]  Tz-[1]     % element no.,
    :     :       :       :        :       :       :       :      % temp. coef.
  M[nT] a[nT]  hy[nT]  hz[nT]  Ty+[nT] Ty-[nT] Tz+[nT] Tz-[nT] % sizes, & temps

nD              % number of joints with prescribed displacements
  J[1]   Dx[1]  Dy[1]  Dz[1]  Dxx[1]  Dyy[1]  Dzz[1]
    :       :      :      :       :       :       :  % prescribed displacements
  J[nD]  Dx[nD] Dy[nD] Dz[nD] Dxx[nD] Dyy[nD] Dzz[nD]
%  end  static load case 1 --------------------------------------------------

% begin static load case 2 --------------------------------------------------
nF       % number of loaded joints
  J[1]    Fx[1]   Fy[1]   Fz[1]   Mxx[1]  Myy[1]  Mzz[1]
    :        :       :       :        :       :       :          % nodal forces
  J[nF]   Fx[nF]  Fy[nF]  Fz[nF]  Mxx[nF] Myy[nF] Mzz[nF]

nU          % number of uniform distributed loads
  M[1]    Ux[1]   Uy[1]   Uz[1]
    :        :       :       :     % uniform distributed loads in local coordinates
  M[nU]   Ux[nU]  Uy[nU]  Uz[nU]

nW     % number of trapezoidally distributed loads
  M[1]  xx1[1]  xx2[2]  wx1[1]  wx2[1]   % locations and loads - local x-axis
        xy1[1]  xy2[2]  wy1[1]  wy2[1]   % locations and loads - local y-axis
        xz1[1]  xz2[2]  wz1[1]  wz2[1]   % locations and loads - local z-axis
    :       :       :       :       :
  M[nW] xx1[nW] xx2[nW] wx1[nW] wx2[nW]  % x1 and x2: start and end locations
        xy1[nW] xy2[nW] wy1[nW] wy2[nW]  % w1 and w2: start load and end load
        xz1[nW] xz2[nW] wz1[nW] wz2[nW]  % 0 < x1 < x2 < L

nP           % number of concentrated point loads
  M[1]    Px[1]   Py[1]   Pz[1]   xP[1]    %  point loads in local coordinates
    :        :       :       :      :      %  and x=distance from coordinate J1
  M[nP]   Px[nP]  Py[nP]  Pz[nP]  xP[nP]

nT           % number of frame elements with temperature changes
  M[1]  a[1]   hy[1]   hz[1]   Ty+[1]  Ty-[1]  Tz+[1]  Tz-[1]     % element no.,
    :     :       :       :        :       :       :       :      % temp. coef.
  M[nT] a[nT]  hy[nT]  hz[nT]  Ty+[nT] Ty-[nT] Tz+[nT] Tz-[nT] % sizes, & temps

nD              % number of joints with prescribed displacements
  J[1]   Dx[1]  Dy[1]  Dz[1]  Dxx[1]  Dyy[1]  Dzz[1]
    :       :      :      :       :       :       :  % prescribed displacements
  J[nD]  Dx[nD] Dy[nD] Dz[nD] Dxx[nD] Dyy[nD] Dzz[nD]
%  end  static load case 2 -------------------------------------------------

% repeat the static load data nL times ... up to 63 static load cases


% dynamic analysis data ...
nM      %       number of desired modes
Mmethod % 1: Subspace-Jacobi iteration, 2: Stodola method
lump    % 0: consistent mass matrix, 1: lumped mass matrix
tol     %  frequency convergence tolerance  approx 1e-4
shift   % frequency shift-factor for rigid body modes, make 0 for pos.def. [K]

 M[1]  d[1]  BMs[1]
   :     :       :         % frame element density and extra frame element mass
 M[nB] d[nB] BMs[nB]

nI           % number of joints with extra joint mass or inertia
 J[1]  JMs[1]   JMx[1]  JMy[1]  JMz[1]     % joint masses and rotatory inertias
   :       :        :       :       :       % global coordinates
 J[nI] JMs[nI]  JMx[nI] JMy[nI] JMz[nI]

% graphical animation data ...
nA      % number of modes to be animated
 anim[0] ... anim[nA] % list of modes to be animated, sorted by increasing freq.
pan           % pan rate during animation

% matrix condensation data ...
Cmethod % matrix condensation method ...  0=none, 1=static, 2=Guyan, 3=dynamic
nC   % number of condensed joints
 J[1]  cx[1]  cy[1]  cz[1]   cxx[1]  cyy[1] czz[1]
    :      :      :      :        :       :       :    % 1: condense; 0: don't
 J[nC] cx[nC] cy[nC] cz[nC]  cxx[nC] cyy[nC]  czz[nC]

  m[1]   m[2]   m[3]  ...      % list of modes matched in dynamic condensation
 % if Cmethod == 1, only mode m[1] is matched.

</pre>

<a name="Variables"/><h2>10. Variable Definitions</h2>

<pre>
       a         - Coefficient of thermal expansion (1/degree)
       anim      - List of modes to be animated, by mode number
       Ax        - Cross-sectional area of a prismatic frame element
    (The x-axis is along the element length, in local coordinates)
       Asy       - Shear area in the local y-axis of a prismatic frame element
       Asz       - Shear area in the local z-axis of a prismatic frame element
       BMs       - extra mass on a frame element, not including self mass
       Cmethod   -  matrix condensation method ...  0=none, 1=static, 2=Guyan, 3=dynamic
       cx        - 1: retain X d.o.f. in condensed system at joint J;  0: don't
       cy        - 1: retain Y d.o.f. in condensed system at joint J;  0: don't
       cz        - 1: retain Z d.o.f. in condensed system at joint J;  0: don't
       cxx       - 1: retain X axis rotation at joint J;  0: don't
       cyy       - 1: retain Y axis rotation at joint J;  0: don't
       czz       - 1: retain Z axis rotation at joint J;  0: don't
       Dx        - Prescribed displacement in the global X direction
       Dy        - Prescribed displacement in the global Y direction
       Dz        - Prescribed displacement in the global Z direction
       Dxx       - Prescribed rotation in the global X direction
       Dyy       - Prescribed rotation in the global Y direction
       Dzz       - Prescribed rotation in the global Z direction
       d         - mass density of a frame element
       E         - Modulus of elasticity of a frame element
       exagg     - Factor for exaggeration of the deformations in the plot
       Fx        - Joint load in the global X direction
       Fy        - Joint load in the global Y direction
       Fz        - Joint load in the global Z direction
       G         -  Shear modulus of elasticity of frame element i
       geom      - 1: include geometric stiffness effects, 0: do not.
       hy        - cross-section dimension in the local y coordinate dir.
       hz        - cross-section dimension in the local z coordinate dir.
       Iyy       - Moment of inertia for bending about the local y axis
       Izz       - Moment of inertia for bending about the local z axis
       J         - Joint number
       J1        - Joint 1 of a frame element
       J2        - Joint 2 of a frame element
       JMs       - extra mass of a joint for translational motion
       JMx       - extra rotatory inertia of a joint about global x coord. dir.
       JMy       - extra rotatory inertia of a joint about global y coord. dir.
       JMz       - extra rotatory inertia of a joint about global z coord. dir.
       Jxx       - Torsional moment of inertia of a frame element
       lump      - 1: use lumped mass matrix, 0: use consistent mass matrix
       M         - Member number
       Mxx       - Joint Moment about the global X axis
       Myy       - Joint Moment about the global Y axis
       Mzz       - Joint Moment about the global Z axis
       m         - list of modes to match in dynamic condensation
       Mmethod   - the modal analysis method 1: Subspace Jacobi, 2: Stodola
       nA        - number of mode shapes to Animate must be less than 20
       nB        - number of Beam elements
       nC        - number of joints for matrix Condensation
       nD        - number of joints with prescribed Displacements (nD <= nR)
       nF        - number of joints with point Forces or concentrated moments
       nI        - number of joints with extra joint mass or Inertia
       nJ        - number of Joints
       nL        - number of static Load cases
       nM        - number of Modes to be calculated
       nP        - number of frame elements with concentrated point loads
       nR        - number of joints with Reaction forces
       nT        - number of frame elements with Temperature changes
       nU        - number of uniformly distributed loads
       nW        - number of trapezoidally distributed loads
       p         - the roll angle of the frame element, in degrees
       pan       - the pan rate of the view point during animation
       Px        - concentrated point load in the local x direction
       Py        - concentrated point load in the local y direction
       Pz        - concentrated point load in the local z direction
       Rx        - 1: reaction force in the global X direction,  0: free
       Ry        - 1: reaction force in the global Y direction,  0: free
       Rz        - 1: reaction force in the global Z direction,  0: free
       Rxx       - 1: reactoin moment about the global X axis, 0: free
       Ryy       - 1: reaction moment about the global Y axis, 0: free
       Rzz       - 1: reaction moment about the global Z axis, 0: free
       r         - r radius of rigid joint sphere around joint i
       shear     - 1: include shear deformations, 0: do not.
       shift     - shift factor for non-definite stiffness matrices
       tol       - tolerance for finding mode shapes ~ 1.e-4
       Ty+       - temperature change on the local +y face of the element
       Ty-       - temperature change on the local -y face of the element
       Tz+       - temperature change on the local +z face of the element
       Tz-       - temperature change on the local -z face of the element
       Ux        - uniform distributed load in the local X direction
       Uy        - uniform distributed load in the local Y direction
       Uz        - uniform distributed load in the local Z direction
       wx1       - starting value for trapezoidally-distributed loads
    in the local x-direction
       wx2       - stopping value for trapezoidally-distributed loads
    in the local x-direction
       wy1       - starting value for trapezoidally-distributed loads
    in the local y-direction
       wy2       - stopping value for trapezoidally-distributed loads
    in the local y-direction
       wz1       - starting value for trapezoidally-distributed loads
    in the local z-direction
       wz2       - stopping value for trapezoidally-distributed loads
    in the local z-direction
       xx1       - distance along a frame element for starting
    trapezoidally-distributed loads in the x-direction
       xx2       - distance along a frame element for stopping
    trapezoidally-distributed loads in the x-direction
       xy1       - distance along a frame element for starting
    trapezoidally-distributed loads in the y-direction
       xy2       - distance along a frame element for stopping
    trapezoidally-distributed loads in the y-direction
       xz1       - distance along a frame element for starting
    trapezoidally-distributed loads in the z-direction
       xz2       - distance along a frame element for stopping
    trapezoidally-distributed loads in the z-direction
       x         - x coordinate of a joint in global coordinates
       y         - y coordinate of a joint in global coordinates
       z         - y coordinate of a joint in global coordinates
       xP        - distance from J1 to the concentrated point load

</pre>

<a name="commandline"/><h2>11. Command-line options</h2>

<p>
<ul>
<li>
<b>Frame3DD</b> is executed from within a
<a href="LinuxTerminal.pdf">terminal</a>
<!-- <a href="LinuxTerminal.pdf"><img src="img/Terminal.jpg" border="0" width="25"></a> -->
or
"<a href="http://www.bleepingcomputer.com/tutorials/tutorial76.html#intro">command prompt window</a>"
<!-- <a href="http://www.bleepingcomputer.com/tutorials/tutorial76.html#intro">
<img src="img/WindowsCommandIcon.jpg" border="0" width="25"></a>-->.
<li> FRAME3DD may be run with interactive prompting for file names by typing ...<br>
<pre>
       frame3dd
</pre>
<li> FRAME3DD may be run without command-line options by typing ...<br>
<pre>
       frame3dd  InFile   OutFile
</pre>
<li> FRAME3DD may be run with command-line options by typing ...<br>
<pre>
       frame3dd -i InFile -o OutFile [OPTIONS]
</pre>

 ... where <tt>[OPTIONS]</tt> over-rides values in the Input Data file and includes
     one or more of the following:
</p>

<pre>
 -------------------------------------------------------------------------
  -i   InFile   the  input data file name --- described in the manual
  -o  OutFile   the output data file name
  -h            print this help message and exit
  -v            display program version, website, brief help info and exit
  -a            display program version, website, and exit
  -c            data check only - the output data reviews the input data
  -q            suppress screen output except for warning messages
  -w            write stiffness and mass matrices to files named Ks Kd Md
  -s  On|Off    On: include shear deformation or Off: neglect ...
  -g  On|Off    On: include geometric stiffness or Off: neglect ...
  -e  value     level of deformation exaggeration for Gnuplot output
  -l  On|Off    On: lumped mass matrix or Off: consistent mass matrix
  -f  value     modal frequency shift for unrestrained structures
  -m   J|S      modal analysis method: J=Jacobi-Subspace or S=Stodola
  -t  value     convergence tolerance for modal analysis
  -p  value     pan rate for mode shape animation
  -r  value     matrix condensation method: 0, 1, 2, or 3
 -------------------------------------------------------------------------
</pre>

<li> Examples:<br>

  Display help information and exit:
<pre>
           frame3dd -h
</pre>

  Suppress screen output:
<pre>
           frame3dd -i InFile -o OutFile -q
</pre>

  Include shear deformation, over-riding the Input Data file value:
<pre>
           frame3dd -i InFile -o OutFile -sOn
</pre>

  Include geometric stiffness and set deformed mesh exaggeration value, over-riding Input Data file values:
<pre>
           frame3dd -i InFile -o OutFile -e100 -gOn
</pre>

  Use consistent mass matrix, set deformed mesh exaggeration value, and
set the animation pan rate, over-riding Input Data file values:
<pre>
           frame3dd -i InFile -o OutFile -lOff -e100 -p3.4
</pre>
</ul>


<a name="sourcecode"/><h2>12. Source code</h2>

<p>The source code is written in ANSI C and is extensively commented. The source code includes functions for frame analysis, LDL' decomposition, LU decomposition, Newton-Raphson iteration, sub-space iteration, Stodola iteration, Sturm eigen-value check, static condensation, Guyan reduction, and dynamic condensation.</p>

<pre>
    file name       description
    -----------     -------------------------------
    main.c          main driver routines
    frame3dd.c      frame analysis
    frame3dd_io.c   input-output functions
    eig.c           generalized eigenvalue analysis
    ldl_dcmp.c      LDL' decomposition
    lu_dcmp.c       LU decomposition
    coordtrans.c    coordinate transformation
    nrutil.c        dynamic memory allocation
</pre>

<p>In addition to the recommended method using 
<a href="http://www.scons.org/">SCons</a> (see <a href="#installrun">above</a>), Frame3DD can also be compiled directly with the <a href="http://gcc.gnu.org/">gcc compiler</a>,
the <a href="http://developer.apple.com/tools/xcode/">Apple Xcode gcc compiler</a>,
the <a href="http://www.delorie.com/djgpp/"> DJGPP gcc compiler</a>,
the <a href="http://www.cs.virginia.edu/~lcc-win32/"> LCC-win32 compiler</a>,
and the <a href="http://www.mingw.org/"> MinGW gcc compiler</a>.
</p>

<p>For example, using GCC, the command to compile is:</p>

<pre>
    gcc -O -o frame3dd main.c frame3dd.c frame3dd_io.c ldl_dcmp.c lu_dcmp.c coordtrans.c eig.c nrutil.c -lm
</pre>

<a name="enhancements"/><h2>13. Enhancements projected for future versions</h2>

<ul>
<li>       A GUI (ideally GPL'able)<br>
<ul>
 <li> <b>FrameEd</b> is a Windows GUI for the 20020103 version of <b>Frame3DD</b> (Jan 3, 2002).
 (<a href="#FrameEd">See above</a>.)
 <li> Work has been done on a <a href="http://www.trolltech.com/products/qt">Qt</a> GUI (Fall 2004)<br>
 <li> A Microstran-Viewer interface is in the works
<a href="http://frame3dd.svn.sourceforge.net/viewvc/frame3dd/trunk/src/microstran/">here</a>.
(Summer 2008)
 <li> A Google-sketchup interface is in the works <a href="http://www.steelweb.info/whatsnew.htm">here</a>
and possibly
<a href="http://chakkree.blogspot.com/2008_05_01_archive.html">here</a>.
(Summer 2008)
</ul>
<li>       Consistent mass matrix including the effects of shear deformation on rotatory inertia
<li>       Dynamic time-history analysis with the HHT-alpha method
<li>       Spectral modal superposition
<li>       Member end joint releases
<li>       Linearly tapered frame elements
<!-- <li>       Membrane elements  -->
<!-- <li>       Plate elements   -->
<li>       Sparse matrix storage and <a href="http://ascendwiki.cheme.cmu.edu/Survey_of_sparse_matrix_software">sparse matrix solvers</a>
<li>       ... your recommendations ... send me an e-mail!
</ul>

<a name="references"/><h2>14. References</h2>

<p>This software was developed using methods described in the following texts.
The two primary sources are the texts by
<a href="http://www.amazon.com/exec/obidos/tg/detail/-/0534206700/qid=1036162662/sr=1-4/ref=sr_1_4/002-7358683-1549619?v=glance">A. Kassimali</a> and <a href="http://www.amazon.com/exec/obidos/ASIN/0486649482/qid=1003514977/sr=1-1/ref=sr_1_8_1/002-2386037-4350467">J.S. Przemieniecki</a>. Other relevant books and articles are:
</p>

<ol>
<li> Howard G. Allen,
    <a href="http://www.amazon.com/exec/obidos/ASIN/0070841004/qid%3D1010096524/ref%3Dsr%5F11%5F0%5F1/103-4346676-9568602">Background to Buckling</a>,
     McGraw-Hill, 1980.  ASIN: 0070841004

<li> Klaus-Jurgen Bathe,
    <a href="http://www.amazon.com/exec/obidos/ASIN/0133014584/qid=1003515087/sr=1-1/ref=sr_1_27_1/002-2386037-4350467">Finite Element Procedures</a>,
    Prentice-Hall, 1995. ISBN: 0133014584

<li> Arthur P. Boresi, Richard J. Schmidt, and Omar M. Sidebottom,
    <a href="http://www.amazon.com/exec/obidos/ASIN/0471551570/ref=pd_cp_nsr_b_1/002-2386037-4350467">Advanced Mechanics of Materials</a>,
    John Wiley & Sons, 1993.            ISBN: 0471551570

<li> Raymond W. Clough and Joseph Penzien,
    <a href="http://www.amazon.com/exec/obidos/ASIN/0070113920/qid%3D1003514837/ref%3Dsr%5F11%5F0%5F1/002-2386037-4350467">Dynamics of Structures</a>,
    McGraw-Hill, 1993.   ASIN: 0070113920

<li> J. P. Den Hartog,
    <a href="http://www.amazon.com/exec/obidos/ASIN/0486654079/qid=1003515697/sr=2-1/ref=sr_2_11_1/002-2386037-4350467">Advanced Strength of Materials</a>,
    Dover Press, 1987.   ISBN: 0486654079

<li> Thomas J. R. Hughes,
    <a href="http://www.amazon.com/exec/obidos/ASIN/0486411818/ref=pd_pym_sim_1_2/002-2386037-4350467">The Finite Element Method: Linear Static and Dynamic Finite Element Analysis</a>,
    Dover Press, 2000.   ISBN: 0486411818

<li> Aslam Kassimali,
    <a href="http://www.amazon.com/exec/obidos/tg/detail/-/0534206700/qid=1036162662/sr=1-4/ref=sr_1_4/002-7358683-1549619?v=glance">Matrix Analysis of Structures</a>,
    Brooks/Cole, 1999.   ISBN: 0534206700

<li> Jaroslav Mackerle,
    <a href="mackerle97.pdf">Finite element linear and nonlinear, static and dynamic analysis of structural
    elements: a bibliography (1992-1995)</a>,
    Engineering Computations, vol. 14, no. 4, pp. 347-440,  1997.

<li> Jaroslav Mackerle,
    <a href="mackerle00.html">Finite element linear and nonlinear, static and dynamic analysis of structural
    elements - an addendum - A bibliography (1996-1999)</a>,
    Engineering Computations, vol. 17, no. 3, pp. 274-351,  2000.

<li> William McGuire, Richard H. Gallagher, and Ronald D. Ziemian,
	<a href="http://www.amazon.com/Structural-Analysis-MASTAN2-William-McGuire/dp/0471376515/ref=pd_bbs_sr_1?ie=UTF8&s=books&qid=1198185313&sr=8-1">
	Matrix Structural Analysis, 2nd ed.</a> John Wiley, 1999.
	ISBN: 0471376515

<li> W.D. Pilkey, Weize Kang and Uwe Schramm,
    <a href="pilkey95.pdf">New structural matrices for a beam element with shear deformation</a>,
    Finite Elements in Analysis and Design, vol. 19, pp. 25-44,  1995.

<li> William H. Press, Saul A. Teukolsky, William T. Vetterling, Brian P. Flannery,
    <a href="http://www.amazon.com/exec/obidos/ASIN/0521431085/qid=1003515201/sr=1-1/ref=sr_1_10_1/002-2386037-4350467">Numerical Recipes in C: The Art of Scientific Computing</a>,
    Cambridge University Press, 1993.   ISBN: 0521431085

<li> J.S. Przemieniecki,
    <a href="http://www.amazon.com/exec/obidos/ASIN/0486649482/qid=1003514977/sr=1-1/ref=sr_1_8_1/002-2386037-4350467">Theory of Matrix Structural Analysis</a>,
    Dover Press, 1985.   ISBN: 0486649482

<li> Robert E. Sennett,
    <a href="http://www.amazon.com/exec/obidos/ASIN/1577661435/qid=1003515858/sr=1-2/ref=sr_1_12_2/002-2386037-4350467">Matrix Analysis of Structures</a>,
    Waveland Press, 2000.ISBN: 1577661435

<li> S. Timoshenko and J.N. Goodier, Theory of Elasticity, 2nd ed.,
    McGraw Hill, 1951.

<li> Ansel C. Ugural and Saul K. Fenster,
    <a href="http://www.amazon.com/exec/obidos/ASIN/013137589X/qid=1003514318/sr=1-1/ref=sr_1_8_1/002-2386037-4350467">Advanced Strength and Applied Elasticity, 3rd ed.</a>,
    Prentice-Hall, 1995. ISBN: 013137589X

</ol>

<hr>

<h2>About this document</h2>

<p>Authors:</p>

<pre>
Henri P. Gavin, P.E., Ph.D.
Department of Civil and Environmental Engineering
Duke University, Box 90287
Durham, NC  27708--0287
<a href="&#109;&#097;&#105;&#108;&#116;&#111;&#058;&#072;&#101;&#110;&#114;&#105;&#046;&#071;&#097;&#118;&#105;&#110;&#064;&#068;&#117;&#107;&#101;&#046;&#101;&#100;&#117;">&#072;&#101;&#110;&#114;&#105;&#046;&#071;&#097;&#118;&#105;&#110;&#064;&#068;&#117;&#107;&#101;&#046;&#101;&#100;&#117;
</a>
</pre>

<pre>
<a href="http://pye.dyndns.org">John Pye</a>
Dept of Engineering
Australian National University
</pre>

<p>
<a href="http://sourceforge.net/projects/frame3dd/"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=221386&amp;type=2" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>
</p>

<p align="justify">
Source code for this document as well as Frame3dd itself is available from
<a href="http://www.sourceforge.net/projects/frame3dd/">
http://www.sourceforge.net/projects/frame3dd/</a>
</p>

<p>Last update: <SCRIPT LANGUAGE="JavaScript">
<!--
m = "Last updated " + document.lastModified;
document.write(m);
// -->
</SCRIPT> (see full <a href="http://frame3dd.svn.sourceforge.net/viewvc/frame3dd/trunk/doc/user-manual.html?view=log">revision log</a>)

</body>
</html>
