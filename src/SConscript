"""	FRAME: Static and dynamic structural analysis of 2D & 3D frames and trusses
	Copyright (C) 1992-2007  Henri P. Gavin

	This program is free software; you may redistribute it and/or
	modify it under the terms of the GNU General Public License
	as published by the Free Software Foundation; either version 2
	of the License, or (at your option) any later version.

	This program is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
"""
Import('env')

srcs = [
	'frame.c','lu_dcmp.c','ldl_dcmp.c','nrutil.c','eig.c'
	, 'frm_io.c'
	, 'coordtrans.c'
]

prog_env = env.Copy()

objs = []
for s in srcs:	
	objs.append( env.Object(s) )
	
if env.get('VERSION'):
	prog_env.Append(
		CPPDEFINES={'VERSION':env['VERSION']}
	)

frame = prog_env.Program('frame',objs + ['main.c'], LIBS=['m'])

# proceed into subdirectory to create libmicrostranparser
env.SConscript('microstran/SConscript','env')

# proceed into directory to create frame viewer program
env.SConscript('viewer/SConscript','env')

bindir=Dir(env.subst("$INSTALL_ROOT$INSTALL_BIN"))
env.Install(bindir,frame);

#libdir=Dir(env.subst("$INSTALL_ROOT$INSTALL_LIB"))
#env.Install(bindir,lib);

env['installdirs'] += [bindir]

print "CCFLAGS =",env['CCFLAGS']
